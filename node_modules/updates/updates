#!/usr/bin/env node
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("dns")),r=e(require("url")),s=e(require("http")),n=e(require("https")),o=e(require("assert")),i=e(require("buffer")),a=e(require("zlib")),c=e(require("events")),h=e(require("stream")),u=e(require("string_decoder")),l=e(require("util")),p=e(require("net")),f=e(require("tls")),d=e(require("fs")),m=e(require("path")),g=e(require("process")),y=e(require("os")),E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function v(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}function b(e){return e&&e.default||e}const w=a.constants||{ZLIB_VERNUM:4736};var R=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},w)),T=O;function O(e){var t=this;if(t instanceof O||(t=new O),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function S(e,t,r){var s=t===e.head?new I(r,null,t,e):new I(r,t,t.next,e);return null===s.next&&(e.tail=s),null===s.prev&&(e.head=s),e.length++,s}function A(e,t){e.tail=new I(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function L(e,t){e.head=new I(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function I(e,t,r,s){if(!(this instanceof I))return new I(e,t,r,s);this.list=s,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}O.Node=I,O.create=O,O.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},O.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},O.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},O.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)A(this,arguments[e]);return this.length},O.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)L(this,arguments[e]);return this.length},O.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},O.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},O.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,s=0;null!==r;s++)e.call(t,r.value,s,this),r=r.next},O.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,s=this.length-1;null!==r;s--)e.call(t,r.value,s,this),r=r.prev},O.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},O.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},O.prototype.map=function(e,t){t=t||this;for(var r=new O,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},O.prototype.mapReverse=function(e,t){t=t||this;for(var r=new O,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},O.prototype.reduce=function(e,t){var r,s=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");s=this.head.next,r=this.head.value}for(var n=0;null!==s;n++)r=e(r,s.value,n),s=s.next;return r},O.prototype.reduceReverse=function(e,t){var r,s=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");s=this.tail.prev,r=this.tail.value}for(var n=this.length-1;null!==s;n--)r=e(r,s.value,n),s=s.prev;return r},O.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},O.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},O.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new O;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,n=this.head;null!==n&&s<e;s++)n=n.next;for(;null!==n&&s<t;s++,n=n.next)r.push(n.value);return r},O.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new O;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,n=this.tail;null!==n&&s>t;s--)n=n.prev;for(;null!==n&&s>e;s--,n=n.prev)r.push(n.value);return r},O.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var s=0,n=this.head;null!==n&&s<e;s++)n=n.next;var o=[];for(s=0;n&&s<t;s++)o.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(s=0;s<r.length;s++)n=S(this,n,r[s]);return o},O.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=t,this.tail=e,this};try{!function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}(O)}catch(e){}const C=u.StringDecoder,k=Symbol("EOF"),x=Symbol("maybeEmitEnd"),N=Symbol("emittedEnd"),$=Symbol("emittingEnd"),j=Symbol("closed"),D=Symbol("read"),P=Symbol("flush"),B=Symbol("flushChunk"),M=Symbol("encoding"),U=Symbol("decoder"),H=Symbol("flowing"),F=Symbol("paused"),q=Symbol("resume"),z=Symbol("bufferLength"),G=Symbol("bufferPush"),Z=Symbol("bufferShift"),X=Symbol("objectMode"),W=Symbol("destroyed"),V="1"!==E._MP_NO_ITERATOR_SYMBOLS_,K=V&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),Y=V&&Symbol.iterator||Symbol("iterator not implemented"),J=e=>"end"===e||"finish"===e||"prefinish"===e;var Q=class e extends h{constructor(e){super(),this[H]=!1,this[F]=!1,this.pipes=new T,this.buffer=new T,this[X]=e&&e.objectMode||!1,this[X]?this[M]=null:this[M]=e&&e.encoding||null,"buffer"===this[M]&&(this[M]=null),this[U]=this[M]?new C(this[M]):null,this[k]=!1,this[N]=!1,this[$]=!1,this[j]=!1,this.writable=!0,this.readable=!0,this[z]=0,this[W]=!1}get bufferLength(){return this[z]}get encoding(){return this[M]}set encoding(e){if(this[X])throw new Error("cannot set encoding in objectMode");if(this[M]&&e!==this[M]&&(this[U]&&this[U].lastNeed||this[z]))throw new Error("cannot change encoding");this[M]!==e&&(this[U]=e?new C(e):null,this.buffer.length&&(this.buffer=this.buffer.map(e=>this[U].write(e)))),this[M]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[X]}set objectMode(e){this[X]=this[X]||!!e}write(e,t,r){if(this[k])throw new Error("write after end");return this[W]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):("function"==typeof t&&(r=t,t="utf8"),t||(t="utf8"),this[X]||Buffer.isBuffer(e)||(s=e,!Buffer.isBuffer(s)&&ArrayBuffer.isView(s)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(e=>e instanceof ArrayBuffer||"object"==typeof e&&e.constructor&&"ArrayBuffer"===e.constructor.name&&e.byteLength>=0)(e)?e=Buffer.from(e):"string"!=typeof e&&(this.objectMode=!0)),this.objectMode||e.length?("string"!=typeof e||this[X]||t===this[M]&&!this[U].lastNeed||(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[M]&&(e=this[U].write(e)),this.flowing?(0!==this[z]&&this[P](!0),this.emit("data",e)):this[G](e),0!==this[z]&&this.emit("readable"),r&&r(),this.flowing):(0!==this[z]&&this.emit("readable"),r&&r(),this.flowing));var s}read(e){if(this[W])return null;try{return 0===this[z]||0===e||e>this[z]?null:(this[X]&&(e=null),this.buffer.length>1&&!this[X]&&(this.encoding?this.buffer=new T([Array.from(this.buffer).join("")]):this.buffer=new T([Buffer.concat(Array.from(this.buffer),this[z])])),this[D](e||null,this.buffer.head.value))}finally{this[x]()}}[D](e,t){return e===t.length||null===e?this[Z]():(this.buffer.head.value=t.slice(e),t=t.slice(0,e),this[z]-=e),this.emit("data",t),this.buffer.length||this[k]||this.emit("drain"),t}end(e,t,r){return"function"==typeof e&&(r=e,e=null),"function"==typeof t&&(r=t,t="utf8"),e&&this.write(e,t),r&&this.once("end",r),this[k]=!0,this.writable=!1,!this.flowing&&this[F]||this[x](),this}[q](){this[W]||(this[F]=!1,this[H]=!0,this.emit("resume"),this.buffer.length?this[P]():this[k]?this[x]():this.emit("drain"))}resume(){return this[q]()}pause(){this[H]=!1,this[F]=!0}get destroyed(){return this[W]}get flowing(){return this[H]}get paused(){return this[F]}[G](e){return this[X]?this[z]+=1:this[z]+=e.length,this.buffer.push(e)}[Z](){return this.buffer.length&&(this[X]?this[z]-=1:this[z]-=this.buffer.head.value.length),this.buffer.shift()}[P](e){do{}while(this[B](this[Z]()));e||this.buffer.length||this[k]||this.emit("drain")}[B](e){return!!e&&(this.emit("data",e),this.flowing)}pipe(e,t){if(this[W])return;const r=this[N];t=t||{},e===process.stdout||e===process.stderr?t.end=!1:t.end=!1!==t.end;const s={dest:e,opts:t,ondrain:e=>this[q]()};return this.pipes.push(s),e.on("drain",s.ondrain),this[q](),r&&s.opts.end&&s.dest.end(),e}addListener(e,t){return this.on(e,t)}on(e,t){try{return super.on(e,t)}finally{"data"!==e||this.pipes.length||this.flowing?J(e)&&this[N]&&(super.emit(e),this.removeAllListeners(e)):this[q]()}}get emittedEnd(){return this[N]}[x](){this[$]||this[N]||this[W]||0!==this.buffer.length||!this[k]||(this[$]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[j]&&this.emit("close"),this[$]=!1)}emit(e,t){if("error"!==e&&"close"!==e&&e!==W&&this[W])return;if("data"===e){if(!t)return;this.pipes.length&&this.pipes.forEach(e=>!1===e.dest.write(t)&&this.pause())}else if("end"===e){if(!0===this[N])return;this[N]=!0,this.readable=!1,this[U]&&(t=this[U].end())&&(this.pipes.forEach(e=>e.dest.write(t)),super.emit("data",t)),this.pipes.forEach(e=>{e.dest.removeListener("drain",e.ondrain),e.opts.end&&e.dest.end()})}else if("close"===e&&(this[j]=!0,!this[N]&&!this[W]))return;const r=new Array(arguments.length);if(r[0]=e,r[1]=t,arguments.length>2)for(let e=2;e<arguments.length;e++)r[e]=arguments[e];try{return super.emit.apply(this,r)}finally{J(e)?this.removeAllListeners(e):this[x]()}}collect(){const e=[];this[X]||(e.dataLength=0);const t=this.promise();return this.on("data",t=>{e.push(t),this[X]||(e.dataLength+=t.length)}),t.then(()=>e)}concat(){return this[X]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[X]?Promise.reject(new Error("cannot concat in objectMode")):this[M]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,t)=>{this.on(W,()=>t(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",e=>t(e))})}[K](){return{next:()=>{const e=this.read();if(null!==e)return Promise.resolve({done:!1,value:e});if(this[k])return Promise.resolve({done:!0});let t=null,r=null;const s=e=>{this.removeListener("data",n),this.removeListener("end",o),r(e)},n=e=>{this.removeListener("error",s),this.removeListener("end",o),this.pause(),t({value:e,done:!!this[k]})},o=()=>{this.removeListener("error",s),this.removeListener("data",n),t({done:!0})},i=()=>s(new Error("stream destroyed"));return new Promise((e,a)=>{r=a,t=e,this.once(W,i),this.once("error",s),this.once("end",o),this.once("data",n)})}}}[Y](){return{next:()=>{const e=this.read();return{value:e,done:null===e}}}}destroy(e){return this[W]?(e?this.emit("error",e):this.emit(W),this):(this[W]=!0,this.buffer=new T,this[z]=0,"function"!=typeof this.close||this[j]||this.close(),e?this.emit("error",e):this.emit(W),this)}static isStream(t){return!!t&&(t instanceof e||t instanceof h||t instanceof c&&("function"==typeof t.pipe||"function"==typeof t.write&&"function"==typeof t.end))}},ee=_((function(e,t){const r=i.Buffer,s=t.constants=R,n=r.concat,c=Symbol("_superWrite");class h extends Error{constructor(e){super("zlib: "+e.message),this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}}const u=Symbol("opts"),l=Symbol("flushFlag"),p=Symbol("finishFlushFlag"),f=Symbol("fullFlushFlag"),d=Symbol("handle"),m=Symbol("onError"),g=Symbol("sawError"),y=Symbol("level"),E=Symbol("strategy"),v=Symbol("ended");class _ extends Q{constructor(e,t){if(!e||"object"!=typeof e)throw new TypeError("invalid options for ZlibBase constructor");super(e),this[v]=!1,this[u]=e,this[l]=e.flush,this[p]=e.finishFlush;try{this[d]=new a[t](e)}catch(e){throw new h(e)}this[m]=e=>{this[g]=!0,this.close(),this.emit("error",e)},this[d].on("error",e=>this[m](new h(e))),this.once("end",()=>this.close)}close(){this[d]&&(this[d].close(),this[d]=null,this.emit("close"))}reset(){if(!this[g])return o(this[d],"zlib binding closed"),this[d].reset()}flush(e){this.ended||("number"!=typeof e&&(e=this[f]),this.write(Object.assign(r.alloc(0),{[l]:e})))}end(e,t,r){return e&&this.write(e,t),this.flush(this[p]),this[v]=!0,super.end(null,null,r)}get ended(){return this[v]}write(e,t,s){if("function"==typeof t&&(s=t,t="utf8"),"string"==typeof e&&(e=r.from(e,t)),this[g])return;o(this[d],"zlib binding closed");const i=this[d]._handle,a=i.close;i.close=()=>{};const u=this[d].close;let p,f;this[d].close=()=>{},r.concat=e=>e;try{const t="number"==typeof e[l]?e[l]:this[l];p=this[d]._processChunk(e,t),r.concat=n}catch(e){r.concat=n,this[m](new h(e))}finally{this[d]&&(this[d]._handle=i,i.close=a,this[d].close=u,this[d].removeAllListeners("error"))}if(p)if(Array.isArray(p)&&p.length>0){f=this[c](r.from(p[0]));for(let e=1;e<p.length;e++)f=this[c](p[e])}else f=this[c](r.from(p));return s&&s(),f}[c](e){return super.write(e)}}class b extends _{constructor(e,t){(e=e||{}).flush=e.flush||s.Z_NO_FLUSH,e.finishFlush=e.finishFlush||s.Z_FINISH,super(e,t),this[f]=s.Z_FULL_FLUSH,this[y]=e.level,this[E]=e.strategy}params(e,t){if(!this[g]){if(!this[d])throw new Error("cannot switch params when binding is closed");if(!this[d].params)throw new Error("not supported in this implementation");if(this[y]!==e||this[E]!==t){this.flush(s.Z_SYNC_FLUSH),o(this[d],"zlib binding closed");const r=this[d].flush;this[d].flush=(e,t)=>{this.flush(e),t()};try{this[d].params(e,t)}finally{this[d].flush=r}this[d]&&(this[y]=e,this[E]=t)}}}}const w=Symbol("_portable");class T extends _{constructor(e,t){(e=e||{}).flush=e.flush||s.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||s.BROTLI_OPERATION_FINISH,super(e,t),this[f]=s.BROTLI_OPERATION_FLUSH}}class O extends T{constructor(e){super(e,"BrotliCompress")}}class S extends T{constructor(e){super(e,"BrotliDecompress")}}t.Deflate=class extends b{constructor(e){super(e,"Deflate")}},t.Inflate=class extends b{constructor(e){super(e,"Inflate")}},t.Gzip=class extends b{constructor(e){super(e,"Gzip"),this[w]=e&&!!e.portable}[c](e){return this[w]?(this[w]=!1,e[9]=255,super[c](e)):super[c](e)}},t.Gunzip=class extends b{constructor(e){super(e,"Gunzip")}},t.DeflateRaw=class extends b{constructor(e){super(e,"DeflateRaw")}},t.InflateRaw=class extends b{constructor(e){super(e,"InflateRaw")}},t.Unzip=class extends b{constructor(e){super(e,"Unzip")}},"function"==typeof a.BrotliCompress?(t.BrotliCompress=O,t.BrotliDecompress=S):t.BrotliCompress=t.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}}));ee.constants,ee.Deflate,ee.Inflate,ee.Gzip,ee.Gunzip,ee.DeflateRaw,ee.InflateRaw,ee.Unzip,ee.BrotliCompress,ee.BrotliDecompress;class te extends Error{constructor(e,t){super(`Bad data size: expected ${t} bytes, but got ${e}`),this.expect=t,this.found=e,this.code="EBADSIZE",Error.captureStackTrace(this,this.constructor)}get name(){return"SizeError"}}class re extends Q{constructor(e={}){if(super(e),e.objectMode)throw new TypeError(this.constructor.name+" streams only work with string and buffer data");if(this.found=0,this.expect=e.size,"number"!=typeof this.expect||this.expect>Number.MAX_SAFE_INTEGER||isNaN(this.expect)||this.expect<0||!isFinite(this.expect)||this.expect!==Math.floor(this.expect))throw new Error("invalid expected size: "+this.expect)}write(e,t,r){const s=Buffer.isBuffer(e)?e:"string"==typeof e?Buffer.from(e,"string"==typeof t?t:"utf8"):e;return Buffer.isBuffer(s)?(this.found+=s.length,this.found>this.expect&&this.emit("error",new te(this.found,this.expect)),super.write(e,t,r)):(this.emit("error",new TypeError(this.constructor.name+" streams only work with string and buffer data")),!1)}emit(e,...t){return"end"===e&&this.found!==this.expect&&this.emit("error",new te(this.found,this.expect)),super.emit(e,...t)}}re.SizeError=te;var se=re;const ne=Symbol("type"),oe=Symbol("buffer");class ie{constructor(e,t){this[ne]="";const r=[];let s=0;if(e){const t=e,n=Number(t.length);for(let e=0;e<n;e++){const n=t[e],o=n instanceof Buffer?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):n instanceof ArrayBuffer?Buffer.from(n):n instanceof ie?n[oe]:"string"==typeof n?Buffer.from(n):Buffer.from(String(n));s+=o.length,r.push(o)}}this[oe]=Buffer.concat(r,s);const n=t&&void 0!==t.type&&String(t.type).toLowerCase();n&&!/[^\u0020-\u007E]/.test(n)&&(this[ne]=n)}get size(){return this[oe].length}get type(){return this[ne]}text(){return Promise.resolve(this[oe].toString())}arrayBuffer(){const e=this[oe],t=e.byteOffset,r=e.byteLength,s=e.buffer.slice(t,t+r);return Promise.resolve(s)}stream(){return(new Q).end(this[oe])}slice(e,t,r){const s=this.size,n=void 0===e?0:e<0?Math.max(s+e,0):Math.min(e,s),o=void 0===t?s:t<0?Math.max(s+t,0):Math.min(t,s),i=Math.max(o-n,0),a=this[oe].slice(n,n+i),c=new ie([],{type:r});return c[oe]=a,c}get[Symbol.toStringTag](){return"Blob"}static get BUFFER(){return oe}}Object.defineProperties(ie.prototype,{size:{enumerable:!0},type:{enumerable:!0}});var ae=ie;class ce extends Error{constructor(e,t,r){super(e),this.code="FETCH_ERROR",r&&Object.assign(this,r),this.errno=this.code,this.type="EBADSIZE"===this.code&&this.found>this.expect?"max-size":t,this.message=e,Error.captureStackTrace(this,this.constructor)}get name(){return"FetchError"}set name(e){}get[Symbol.toStringTag](){return"FetchError"}}var he=ce,ue=b(Object.freeze({__proto__:null,default:null}));const{BUFFER:le}=ae;let pe;try{pe=ue.convert}catch(e){}const fe=Symbol("Body internals"),de=Symbol("consumeBody");class me{constructor(e,t={}){const{size:r=0,timeout:s=0}=t,n=null==e?null:ge(e)?Buffer.from(e.toString()):ye(e)||Buffer.isBuffer(e)?e:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?Buffer.from(e):ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):Q.isStream(e)?e:Buffer.from(String(e));this[fe]={body:n,disturbed:!1,error:null},this.size=r,this.timeout=s,Q.isStream(n)&&n.on("error",e=>{const t="AbortError"===e.name?e:new he(`Invalid response while trying to fetch ${this.url}: ${e.message}`,"system",e);this[fe].error=t})}get body(){return this[fe].body}get bodyUsed(){return this[fe].disturbed}arrayBuffer(){return this[de]().then(e=>e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}blob(){const e=this.headers&&this.headers.get("content-type")||"";return this[de]().then(t=>Object.assign(new ae([],{type:e.toLowerCase()}),{[le]:t}))}json(){return this[de]().then(e=>{try{return JSON.parse(e.toString())}catch(e){return Promise.reject(new he(`invalid json response body at ${this.url} reason: ${e.message}`,"invalid-json"))}})}text(){return this[de]().then(e=>e.toString())}buffer(){return this[de]()}textConverted(){return this[de]().then(e=>Ee(e,this.headers))}[de](){if(this[fe].disturbed)return Promise.reject(new TypeError("body used already for: "+this.url));if(this[fe].disturbed=!0,this[fe].error)return Promise.reject(this[fe].error);if(null===this.body)return Promise.resolve(Buffer.alloc(0));if(Buffer.isBuffer(this.body))return Promise.resolve(this.body);const e=ye(this.body)?this.body.stream():this.body;if(!Q.isStream(e))return Promise.resolve(Buffer.alloc(0));const t=this.size&&e instanceof se?e:this.size||!(e instanceof Q)||e instanceof se?this.size?new se({size:this.size}):new Q:e,r=this.timeout?setTimeout(()=>{t.emit("error",new he(`Response timeout while trying to fetch ${this.url} (over ${this.timeout}ms)`,"body-timeout"))},this.timeout):null;return new Promise((r,s)=>{t!==e&&(e.on("error",e=>t.emit("error",e)),e.pipe(t)),r()}).then(()=>t.concat()).then(e=>(clearTimeout(r),e)).catch(e=>{throw clearTimeout(r),"AbortError"===e.name||"FetchError"===e.name?e:"RangeError"===e.name?new he(`Could not create Buffer from response body for ${this.url}: ${e.message}`,"system",e):new he(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e)})}static clone(e){if(e.bodyUsed)throw new Error("cannot clone body after it is used");const t=e.body;if(Q.isStream(t)&&"function"!=typeof t.getBoundary){const r=new Q,s=new Q,n=new Q;return r.on("error",e=>{s.emit("error",e),n.emit("error",e)}),t.on("error",e=>r.emit("error",e)),r.pipe(s),r.pipe(n),t.pipe(r),e[fe].body=s,n}return e.body}static extractContentType(e){return null==e?null:"string"==typeof e?"text/plain;charset=UTF-8":ge(e)?"application/x-www-form-urlencoded;charset=UTF-8":ye(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():Q.isStream(e)?null:"text/plain;charset=UTF-8"}static getTotalBytes(e){const{body:t}=e;return null==t?0:ye(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}static writeToStream(e,t){const{body:r}=t;if(null==r)e.end();else if(Buffer.isBuffer(r)||"string"==typeof r)e.end(r);else{(ye(r)?r.stream():r).on("error",t=>e.emit("error",t)).pipe(e)}return e}}Object.defineProperties(me.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});const ge=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort),ye=e=>"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag]),Ee=(e,t)=>{if("function"!=typeof pe)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t&&t.get("content-type");let s,n,o="utf-8";return r&&(s=/charset=([^;]*)/i.exec(r)),n=e.slice(0,1024).toString(),!s&&n&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(n)),!s&&n&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(n),s||(s=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(n),s&&s.pop()),s&&(s=/charset=(.*)/i.exec(s.pop()))),!s&&n&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(n)),s&&(o=s.pop(),"gb2312"!==o&&"gbk"!==o||(o="gb18030")),pe(e,"UTF-8",o).toString()};var ve=me;const _e=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,be=/[^\t\x20-\x7e\x80-\xff]/,we=e=>{if(e=""+e,_e.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")},Re=e=>{if(e=""+e,be.test(e))throw new TypeError(e+" is not a legal HTTP header value")},Te=(e,t)=>{t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r},Oe=Symbol("map");class Se{constructor(e){if(this[Oe]=Object.create(null),e instanceof Se){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null!=e){if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");const e=Array.from(t);if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");r.push(e)}for(const e of r)this.append(e[0],e[1])}else for(const t of Object.keys(e))this.append(t,e[t])}}}get(e){we(e=""+e);const t=Te(this[Oe],e);return void 0===t?null:this[Oe][t].join(", ")}forEach(e,t){let r=Ae(this);for(let s=0;s<r.length;s++){const[n,o]=r[s];e.call(t,o,n,this),r=Ae(this)}}set(e,t){t=""+t,we(e=""+e),Re(t);const r=Te(this[Oe],e);this[Oe][void 0!==r?r:e]=[t]}append(e,t){t=""+t,we(e=""+e),Re(t);const r=Te(this[Oe],e);void 0!==r?this[Oe][r].push(t):this[Oe][e]=[t]}has(e){return we(e=""+e),void 0!==Te(this[Oe],e)}delete(e){we(e=""+e);const t=Te(this[Oe],e);void 0!==t&&delete this[Oe][t]}raw(){return this[Oe]}keys(){return new Ie(this,"key")}values(){return new Ie(this,"value")}[Symbol.iterator](){return new Ie(this,"key+value")}entries(){return new Ie(this,"key+value")}get[Symbol.toStringTag](){return"Headers"}static exportNodeCompatibleHeaders(e){const t=Object.assign(Object.create(null),e[Oe]),r=Te(e[Oe],"Host");return void 0!==r&&(t[r]=t[r][0]),t}static createHeadersLenient(e){const t=new Se;for(const r of Object.keys(e))if(!_e.test(r))if(Array.isArray(e[r]))for(const s of e[r])be.test(s)||(void 0===t[Oe][r]?t[Oe][r]=[s]:t[Oe][r].push(s));else be.test(e[r])||(t[Oe][r]=[e[r]]);return t}}Object.defineProperties(Se.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const Ae=(e,t="key+value")=>Object.keys(e[Oe]).sort().map("key"===t?e=>e.toLowerCase():"value"===t?t=>e[Oe][t].join(", "):t=>[t.toLowerCase(),e[Oe][t].join(", ")]),Le=Symbol("internal");class Ie{constructor(e,t){this[Le]={target:e,kind:t,index:0}}get[Symbol.toStringTag](){return"HeadersIterator"}next(){if(!this||Object.getPrototypeOf(this)!==Ie.prototype)throw new TypeError("Value of `this` is not a HeadersIterator");const{target:e,kind:t,index:r}=this[Le],s=Ae(e,t);return r>=s.length?{value:void 0,done:!0}:(this[Le].index++,{value:s[r],done:!1})}}Object.setPrototypeOf(Ie.prototype,Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));var Ce=Se;const{STATUS_CODES:ke}=s,{clone:xe,extractContentType:Ne}=ve,$e=Symbol("Response internals");class je extends ve{constructor(e=null,t={}){super(e,t);const r=t.status||200,s=new Ce(t.headers);if(null!=e&&!s.has("Content-Type")){const t=Ne(e);t&&s.append("Content-Type",t)}this[$e]={url:t.url,status:r,statusText:t.statusText||ke[r],headers:s,counter:t.counter,trailer:Promise.resolve(t.trailer||new Ce)}}get trailer(){return this[$e].trailer}get url(){return this[$e].url||""}get status(){return this[$e].status}get ok(){return this[$e].status>=200&&this[$e].status<300}get redirected(){return this[$e].counter>0}get statusText(){return this[$e].statusText}get headers(){return this[$e].headers}clone(){return new je(xe(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,trailer:this.trailer})}get[Symbol.toStringTag](){return"Response"}}var De=je;Object.defineProperties(je.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Pe="minipass-fetch",Be="An implementation of window.fetch in Node.js using Minipass streams",Me={test:"tap",snap:"tap",preversion:"npm test",postversion:"npm publish",postpublish:"git push origin --follow-tags"},Ue={"coverage-map":"map.js","check-coverage":!0},He={"@ungap/url-search-params":"^0.1.2","abort-controller":"^3.0.0","abortcontroller-polyfill":"^1.3.0","form-data":"^2.5.1",parted:"^0.1.1","string-to-arraybuffer":"^1.0.2",tap:"^14.6.9","whatwg-url":"^7.0.0"},Fe={minipass:"^3.1.0","minipass-pipeline":"^1.2.2","minipass-sized":"^1.0.3",minizlib:"^2.0.0"},qe={encoding:"^0.1.12"},ze={type:"git",url:"git+https://github.com/npm/minipass-fetch.git"},Ge=["fetch","minipass","node-fetch","window.fetch"],Ze=["index.js","lib/*.js"],Xe={node:">=8"};var We={name:Pe,version:"1.2.1",description:Be,license:"MIT",main:"lib/index.js",scripts:Me,tap:Ue,devDependencies:He,dependencies:Fe,optionalDependencies:qe,repository:ze,keywords:Ge,files:Ze,engines:Xe},Ve=b(Object.freeze({__proto__:null,name:Pe,version:"1.2.1",description:Be,license:"MIT",main:"lib/index.js",scripts:Me,tap:Ue,devDependencies:He,dependencies:Fe,optionalDependencies:qe,repository:ze,keywords:Ge,files:Ze,engines:Xe,default:We}));const{exportNodeCompatibleHeaders:Ke}=Ce,{clone:Ye,extractContentType:Je,getTotalBytes:Qe}=ve,et=`minipass-fetch/${Ve.version} (+https://github.com/isaacs/minipass-fetch)`,tt=Symbol("Request internals"),{parse:rt,format:st}=r,nt=e=>"object"==typeof e&&"object"==typeof e[tt];class ot extends ve{constructor(e,t={}){const s=nt(e)?r.parse(e.url):e&&e.href?r.parse(e.href):r.parse(""+e);nt(e)||(e={});const n=(t.method||e.method||"GET").toUpperCase(),o="GET"===n||"HEAD"===n;if((null!==t.body&&void 0!==t.body||nt(e)&&null!==e.body)&&o)throw new TypeError("Request with GET/HEAD method cannot have body");const i=null!==t.body&&void 0!==t.body?t.body:nt(e)&&null!==e.body?Ye(e):null;super(i,{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0});const a=new Ce(t.headers||e.headers||{});if(null!=i&&!a.has("Content-Type")){const e=Je(i);e&&a.append("Content-Type",e)}const c="signal"in t?t.signal:nt(e)?e.signal:null;if(null!=c&&!(e=>{const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)})(c))throw new TypeError("Expected signal must be an instanceof AbortSignal");this[tt]={method:n,redirect:t.redirect||e.redirect||"follow",headers:a,parsedURL:s,signal:c},this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent}get method(){return this[tt].method}get url(){return st(this[tt].parsedURL)}get headers(){return this[tt].headers}get redirect(){return this[tt].redirect}get signal(){return this[tt].signal}clone(){return new ot(this)}get[Symbol.toStringTag](){return"Request"}static getNodeRequestOptions(e){const t=e[tt].parsedURL,r=new Ce(e[tt].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&Q.isStream(e.body)&&"function"!=typeof e.body.destroy)throw new Error("Cancellation of streamed requests with AbortSignal is not supported");const s=null!==e.body&&void 0!==e.body||!/^(POST|PUT)$/i.test(e.method)?null!==e.body&&void 0!==e.body?Qe(e):null:"0";s&&r.set("Content-Length",s+""),r.has("User-Agent")||r.set("User-Agent",et),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");const n="function"==typeof e.agent?e.agent(t):e.agent;return r.has("Connection")||n||r.set("Connection","close"),{...t,method:e.method,headers:Ke(r),agent:n}}}var it=ot;Object.defineProperties(ot.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});class at extends Error{constructor(e){super(e),this.code="FETCH_ABORTED",this.type="aborted",Error.captureStackTrace(this,this.constructor)}get name(){return"AbortError"}set name(e){}}var ct=at;const{writeToStream:ht,getTotalBytes:ut}=ve,{createHeadersLenient:lt}=Ce,{getNodeRequestOptions:pt}=it,ft=r.resolve,dt=(e,t)=>{if(/^data:/.test(e)){const r=new it(e,t);try{const t=e.split(","),r=Buffer.from(t[1],"base64"),s=t[0].match(/^data:(.*);base64$/)[1];return Promise.resolve(new De(r,{headers:{"Content-Type":s,"Content-Length":r.length}}))}catch(e){return Promise.reject(new he(`[${r.method}] ${r.url} invalid URL, ${e.message}`,"system",e))}}return new Promise((o,i)=>{const a=new it(e,t);let c;try{c=pt(a)}catch(e){return i(e)}const h=("https:"===c.protocol?n:s).request,{signal:u}=a;let l=null;const p=()=>{const e=new ct("The user aborted a request.");i(e),Q.isStream(a.body)&&"function"==typeof a.body.destroy&&a.body.destroy(e),l&&l.body&&l.body.emit("error",e)};if(u&&u.aborted)return p();const f=()=>{p(),d()},d=()=>{m.abort(),u&&u.removeEventListener("abort",f),clearTimeout(g)},m=h(c);u&&u.addEventListener("abort",f);let g=null;a.timeout&&m.once("socket",e=>{g=setTimeout(()=>{i(new he("network timeout at: "+a.url,"request-timeout")),d()},a.timeout)}),m.on("error",e=>{i(new he(`request to ${a.url} failed, reason: ${e.message}`,"system",e)),d()}),m.on("response",e=>{clearTimeout(g);const t=lt(e.headers);if(dt.isRedirect(e.statusCode)){const s=t.get("Location"),n=null===s?null:ft(a.url,s);switch(a.redirect){case"error":return i(new he("uri requested responds with a redirect, redirect mode is set to error: "+a.url,"no-redirect")),void d();case"manual":if(null!==n)try{t.set("Location",n)}catch(e){i(e)}break;case"follow":if(null===n)break;if(a.counter>=a.follow)return i(new he("maximum redirect reached at: "+a.url,"max-redirect")),void d();if(303!==e.statusCode&&a.body&&null===ut(a))return i(new he("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void d();a.headers.set("host",r.parse(n).host);const s={headers:new Ce(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body,signal:a.signal,timeout:a.timeout};return 303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==a.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),o(dt(new it(n,s))),void d()}}e.once("end",()=>u&&u.removeEventListener("abort",f));const s=new Q;e.on("error",e=>s.emit("error",e)).pipe(s);const n={url:a.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:a.size,timeout:a.timeout,counter:a.counter,trailer:new Promise(t=>e.on("end",()=>t(lt(e.trailers))))},c=t.get("Content-Encoding");if(!a.compress||"HEAD"===a.method||null===c||204===e.statusCode||304===e.statusCode)return l=new De(s,n),void o(l);const h={flush:ee.constants.Z_SYNC_FLUSH,finishFlush:ee.constants.Z_SYNC_FLUSH};if("gzip"==c||"x-gzip"==c){const e=new ee.Gunzip(h);return l=new De(s.on("error",t=>e.emit("error",t)).pipe(e),n),void o(l)}if("deflate"!=c&&"x-deflate"!=c){if("br"==c&&"function"==typeof ee.BrotliDecompress){const e=new ee.BrotliDecompress;return s.on("error",t=>e.emit("error",t)).pipe(e),l=new De(e,n),void o(l)}l=new De(s,n),o(l)}else{e.pipe(new Q).once("data",e=>{const t=8==(15&e[0])?new ee.Inflate:new ee.InflateRaw;s.on("error",e=>t.emit("error",e)).pipe(t),l=new De(t,n),o(l)})}}),ht(m,a)})};var mt=dt;dt.isRedirect=e=>301===e||302===e||303===e||307===e||308===e,dt.Headers=Ce,dt.Request=it,dt.Response=De,dt.FetchError=he;const gt="Opinionated, caching, retrying fetch client",yt=["*.js","lib","utils"],Et={preversion:"npm t",postversion:"npm publish",prepublishOnly:"git push --follow-tags",test:"tap test/*.js",posttest:"npm run lint",lint:"standard"},vt="https://github.com/npm/make-fetch-happen",_t=["http","request","fetch","mean girls","caching","cache","subresource integrity"],bt={name:"Kat Marchán",email:"kzm@zkat.tech",twitter:"maybekatz"},wt={agentkeepalive:"^4.1.0",cacache:"^15.0.0","http-cache-semantics":"^4.0.4","http-proxy-agent":"^4.0.1","https-proxy-agent":"^5.0.0","is-lambda":"^1.0.1","lru-cache":"^5.1.1",minipass:"^3.1.3","minipass-collect":"^1.0.2","minipass-fetch":"^1.1.2","minipass-flush":"^1.0.5","minipass-pipeline":"^1.2.2","promise-retry":"^1.1.1","socks-proxy-agent":"^5.0.0",ssri:"^8.0.0"},Rt={mkdirp:"^1.0.3",nock:"^11.9.1",npmlog:"^4.1.2","require-inject":"^1.4.2",rimraf:"^2.7.1","safe-buffer":"^5.2.0",standard:"^14.3.1","standard-version":"^7.1.0",tacks:"^1.2.6",tap:"^14.10.6"},Tt={node:">= 10"};var Ot={name:"make-fetch-happen",version:"8.0.7",description:gt,main:"index.js",files:yt,scripts:Et,repository:vt,keywords:_t,author:bt,license:"ISC",dependencies:wt,devDependencies:Rt,engines:Tt},St=Object.freeze({__proto__:null,name:"make-fetch-happen",version:"8.0.7",description:gt,main:"index.js",files:yt,scripts:Et,repository:vt,keywords:_t,author:bt,license:"ISC",dependencies:wt,devDependencies:Rt,engines:Tt,default:Ot});var At=function(e,t,r){var s,n=e instanceof Error?e:new Error(e);if("object"==typeof t?r=t:null!=t&&(n.code=t),r)for(s in r)n[s]=r[s];return n};function Lt(e,t){"boolean"==typeof t&&(t={forever:t}),this._timeouts=e,this._options=t||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var It=Lt;Lt.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},Lt.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift()}var r=this,s=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),this._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),t);return this._options.unref&&s.unref(),!0},Lt.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){r._operationTimeoutCb()}),r._operationTimeout)),this._fn(this._attempts)},Lt.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},Lt.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},Lt.prototype.start=Lt.prototype.try,Lt.prototype.errors=function(){return this._errors},Lt.prototype.attempts=function(){return this._attempts},Lt.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,s=0;s<this._errors.length;s++){var n=this._errors[s],o=n.message,i=(e[o]||0)+1;e[o]=i,i>=r&&(t=n,r=i)}return t};var Ct=_((function(e,t){t.operation=function(e){var r=t.timeouts(e);return new It(r,{forever:e&&e.forever,unref:e&&e.unref})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],n=0;n<t.retries;n++)s.push(this.createTimeout(n,t));return e&&e.forever&&!s.length&&s.push(this.createTimeout(n,t)),s.sort((function(e,t){return e-t})),s},t.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,s=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return s=Math.min(s,t.maxTimeout)},t.wrap=function(e,r,s){if(r instanceof Array&&(s=r,r=null),!s)for(var n in s=[],e)"function"==typeof e[n]&&s.push(n);for(var o=0;o<s.length;o++){var i=s[o],a=e[i];e[i]=function(){var s=t.operation(r),n=Array.prototype.slice.call(arguments),o=n.pop();n.push((function(e){s.retry(e)||(e&&(arguments[0]=s.mainError()),o.apply(this,arguments))})),s.attempt((function(){a.apply(e,n)}))},e[i].options=r}}})),kt=(Ct.operation,Ct.timeouts,Ct.createTimeout,Ct.wrap,Ct),xt=Object.prototype.hasOwnProperty;function Nt(e){return e&&"EPROMISERETRY"===e.code&&xt.call(e,"retried")}var $t=function(e,t){var r,s;return"object"==typeof e&&"function"==typeof t&&(r=t,t=e,e=r),s=kt.operation(t),new Promise((function(t,r){s.attempt((function(n){Promise.resolve().then((function(){return e((function(e){throw Nt(e)&&(e=e.retried),At("Retrying","EPROMISERETRY",{retried:e})}),n)})).then(t,(function(e){Nt(e)&&(e=e.retried,s.retry(e||new Error))||r(e)}))}))}))};const jt=Symbol("_head"),Dt=Symbol("_tail"),Pt=Symbol("_linkStreams"),Bt=Symbol("_setHead"),Mt=Symbol("_setTail"),Ut=Symbol("_onError"),Ht=Symbol("_onData"),Ft=Symbol("_onEnd"),qt=Symbol("_onDrain"),zt=Symbol("_streams");var Gt=class extends Q{constructor(e,...t){(e=>e&&e instanceof c&&("function"==typeof e.pipe||"function"==typeof e.write&&"function"==typeof e.end))(e)&&(t.unshift(e),e={}),super(e),this[zt]=[],t.length&&this.push(...t)}[Pt](e){return e.reduce((e,t)=>(e.on("error",e=>t.emit("error",e)),e.pipe(t),t))}push(...e){this[zt].push(...e),this[Dt]&&e.unshift(this[Dt]);const t=this[Pt](e);this[Mt](t),this[jt]||this[Bt](e[0])}unshift(...e){this[zt].unshift(...e),this[jt]&&e.push(this[jt]);const t=this[Pt](e);this[Bt](e[0]),this[Dt]||this[Mt](t)}destroy(e){return this[zt].forEach(e=>"function"==typeof e.destroy&&e.destroy()),super.destroy(e)}[Mt](e){this[Dt]=e,e.on("error",t=>this[Ut](e,t)),e.on("data",t=>this[Ht](e,t)),e.on("end",()=>this[Ft](e)),e.on("finish",()=>this[Ft](e))}[Ut](e,t){e===this[Dt]&&this.emit("error",t)}[Ht](e,t){e===this[Dt]&&super.write(t)}[Ft](e){e===this[Dt]&&super.end()}pause(){return super.pause(),this[Dt]&&this[Dt].pause&&this[Dt].pause()}emit(e,...t){return"resume"===e&&this[Dt]&&this[Dt].resume&&this[Dt].resume(),super.emit(e,...t)}[Bt](e){this[jt]=e,e.on("drain",()=>this[qt](e))}[qt](e){e===this[jt]&&this.emit("drain")}write(e,t,r){return this[jt].write(e,t,r)&&this.flowing}end(e,t,r){return this[jt].end(e,t,r),this}},Zt=Xt;function Xt(e){var t=this;if(t instanceof Xt||(t=new Xt),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function Wt(e,t,r){var s=t===e.head?new Yt(r,null,t,e):new Yt(r,t,t.next,e);return null===s.next&&(e.tail=s),null===s.prev&&(e.head=s),e.length++,s}function Vt(e,t){e.tail=new Yt(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Kt(e,t){e.head=new Yt(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Yt(e,t,r,s){if(!(this instanceof Yt))return new Yt(e,t,r,s);this.list=s,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}Xt.Node=Yt,Xt.create=Xt,Xt.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},Xt.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},Xt.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},Xt.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Vt(this,arguments[e]);return this.length},Xt.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Kt(this,arguments[e]);return this.length},Xt.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},Xt.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},Xt.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,s=0;null!==r;s++)e.call(t,r.value,s,this),r=r.next},Xt.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,s=this.length-1;null!==r;s--)e.call(t,r.value,s,this),r=r.prev},Xt.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},Xt.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},Xt.prototype.map=function(e,t){t=t||this;for(var r=new Xt,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},Xt.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Xt,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},Xt.prototype.reduce=function(e,t){var r,s=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");s=this.head.next,r=this.head.value}for(var n=0;null!==s;n++)r=e(r,s.value,n),s=s.next;return r},Xt.prototype.reduceReverse=function(e,t){var r,s=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");s=this.tail.prev,r=this.tail.value}for(var n=this.length-1;null!==s;n--)r=e(r,s.value,n),s=s.prev;return r},Xt.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},Xt.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},Xt.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Xt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,n=this.head;null!==n&&s<e;s++)n=n.next;for(;null!==n&&s<t;s++,n=n.next)r.push(n.value);return r},Xt.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new Xt;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,n=this.tail;null!==n&&s>t;s--)n=n.prev;for(;null!==n&&s>e;s--,n=n.prev)r.push(n.value);return r},Xt.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,s=this.head;null!==s&&r<e;r++)s=s.next;var n=[];for(r=0;s&&r<t;r++)n.push(s.value),s=this.removeNode(s);null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(r=2;r<arguments.length;r++)s=Wt(this,s,arguments[r]);return n},Xt.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var s=r.prev;r.prev=r.next,r.next=s}return this.head=t,this.tail=e,this};try{!function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}(Xt)}catch(e){}const Jt=Symbol("max"),Qt=Symbol("length"),er=Symbol("lengthCalculator"),tr=Symbol("allowStale"),rr=Symbol("maxAge"),sr=Symbol("dispose"),nr=Symbol("noDisposeOnSet"),or=Symbol("lruList"),ir=Symbol("cache"),ar=Symbol("updateAgeOnGet"),cr=()=>1;const hr=(e,t,r)=>{const s=e[ir].get(t);if(s){const t=s.value;if(ur(e,t)){if(pr(e,s),!e[tr])return}else r&&(e[ar]&&(s.value.now=Date.now()),e[or].unshiftNode(s));return t.value}},ur=(e,t)=>{if(!t||!t.maxAge&&!e[rr])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[rr]&&r>e[rr]},lr=e=>{if(e[Qt]>e[Jt])for(let t=e[or].tail;e[Qt]>e[Jt]&&null!==t;){const r=t.prev;pr(e,t),t=r}},pr=(e,t)=>{if(t){const r=t.value;e[sr]&&e[sr](r.key,r.value),e[Qt]-=r.length,e[ir].delete(r.key),e[or].removeNode(t)}};class fr{constructor(e,t,r,s,n){this.key=e,this.value=t,this.length=r,this.now=s,this.maxAge=n||0}}const dr=(e,t,r,s)=>{let n=r.value;ur(e,n)&&(pr(e,r),e[tr]||(n=void 0)),n&&t.call(s,n.value,n.key,e)};var mr=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[Jt]=e.max||1/0;const t=e.length||cr;if(this[er]="function"!=typeof t?cr:t,this[tr]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[rr]=e.maxAge||0,this[sr]=e.dispose,this[nr]=e.noDisposeOnSet||!1,this[ar]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[Jt]=e||1/0,lr(this)}get max(){return this[Jt]}set allowStale(e){this[tr]=!!e}get allowStale(){return this[tr]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[rr]=e,lr(this)}get maxAge(){return this[rr]}set lengthCalculator(e){"function"!=typeof e&&(e=cr),e!==this[er]&&(this[er]=e,this[Qt]=0,this[or].forEach(e=>{e.length=this[er](e.value,e.key),this[Qt]+=e.length})),lr(this)}get lengthCalculator(){return this[er]}get length(){return this[Qt]}get itemCount(){return this[or].length}rforEach(e,t){t=t||this;for(let r=this[or].tail;null!==r;){const s=r.prev;dr(this,e,r,t),r=s}}forEach(e,t){t=t||this;for(let r=this[or].head;null!==r;){const s=r.next;dr(this,e,r,t),r=s}}keys(){return this[or].toArray().map(e=>e.key)}values(){return this[or].toArray().map(e=>e.value)}reset(){this[sr]&&this[or]&&this[or].length&&this[or].forEach(e=>this[sr](e.key,e.value)),this[ir]=new Map,this[or]=new Zt,this[Qt]=0}dump(){return this[or].map(e=>!ur(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[or]}set(e,t,r){if((r=r||this[rr])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const s=r?Date.now():0,n=this[er](t,e);if(this[ir].has(e)){if(n>this[Jt])return pr(this,this[ir].get(e)),!1;const o=this[ir].get(e).value;return this[sr]&&(this[nr]||this[sr](e,o.value)),o.now=s,o.maxAge=r,o.value=t,this[Qt]+=n-o.length,o.length=n,this.get(e),lr(this),!0}const o=new fr(e,t,n,s,r);return o.length>this[Jt]?(this[sr]&&this[sr](e,t),!1):(this[Qt]+=o.length,this[or].unshift(o),this[ir].set(e,this[or].head),lr(this),!0)}has(e){if(!this[ir].has(e))return!1;const t=this[ir].get(e).value;return!ur(this,t)}get(e){return hr(this,e,!0)}peek(e){return hr(this,e,!1)}pop(){const e=this[or].tail;return e?(pr(this,e),e.value):null}del(e){pr(this,this[ir].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const s=e[r],n=s.e||0;if(0===n)this.set(s.k,s.v);else{const e=n-t;e>0&&this.set(s.k,s.v,e)}}}prune(){this[ir].forEach((e,t)=>hr(this,t,!1))}},gr=!(!process.env.LAMBDA_TASK_ROOT||!process.env.AWS_EXECUTION_ENV),yr=1e3,Er=60*yr,vr=60*Er,_r=24*vr,br=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return r*_r;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Er;case"seconds":case"second":case"secs":case"sec":case"s":return r*yr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=_r)return wr(e,t,_r,"day");if(t>=vr)return wr(e,t,vr,"hour");if(t>=Er)return wr(e,t,Er,"minute");if(t>=yr)return wr(e,t,yr,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=_r)return Math.round(e/_r)+"d";if(t>=vr)return Math.round(e/vr)+"h";if(t>=Er)return Math.round(e/Er)+"m";if(t>=yr)return Math.round(e/yr)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function wr(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}var Rr=function(e){if("number"==typeof e)return e;var t=br(e);if(void 0===t){var r=new Error(l.format("humanize-ms(%j) result undefined",e));console.warn(r.stack)}return t},Tr=Object.freeze({__proto__:null,default:()=>()=>{}}),Or={CURRENT_ID:Symbol("agentkeepalive#currentId"),CREATE_ID:Symbol("agentkeepalive#createId"),INIT_SOCKET:Symbol("agentkeepalive#initSocket"),CREATE_HTTPS_CONNECTION:Symbol("agentkeepalive#createHttpsConnection"),SOCKET_CREATED_TIME:Symbol("agentkeepalive#socketCreatedTime"),SOCKET_NAME:Symbol("agentkeepalive#socketName"),SOCKET_REQUEST_COUNT:Symbol("agentkeepalive#socketRequestCount"),SOCKET_REQUEST_FINISHED_COUNT:Symbol("agentkeepalive#socketRequestFinishedCount")},Sr=b(Tr);const Ar=s.Agent,Lr=Sr("agentkeepalive"),Ir=Sr("agentkeepalive"),{INIT_SOCKET:Cr,CURRENT_ID:kr,CREATE_ID:xr,SOCKET_CREATED_TIME:Nr,SOCKET_NAME:$r,SOCKET_REQUEST_COUNT:jr,SOCKET_REQUEST_FINISHED_COUNT:Dr}=Or;let Pr=1;const Br=parseInt(process.version.split(".",1)[0].substring(1));Br>=11&&Br<=12?Pr=2:Br>=13&&(Pr=3);function Mr(e){return e.timeout||e._idleTimeout}var Ur=class extends Ar{constructor(e){(e=e||{}).keepAlive=!1!==e.keepAlive,void 0===e.freeSocketTimeout&&(e.freeSocketTimeout=15e3),e.keepAliveTimeout&&(Ir("options.keepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.keepAliveTimeout,delete e.keepAliveTimeout),e.freeSocketKeepAliveTimeout&&(Ir("options.freeSocketKeepAliveTimeout is deprecated, please use options.freeSocketTimeout instead"),e.freeSocketTimeout=e.freeSocketKeepAliveTimeout,delete e.freeSocketKeepAliveTimeout),void 0===e.timeout&&(e.timeout=Math.max(2*e.freeSocketTimeout,3e4)),e.timeout=Rr(e.timeout),e.freeSocketTimeout=Rr(e.freeSocketTimeout),e.socketActiveTTL=e.socketActiveTTL?Rr(e.socketActiveTTL):0,super(e),this[kr]=0,this.createSocketCount=0,this.createSocketCountLastCheck=0,this.createSocketErrorCount=0,this.createSocketErrorCountLastCheck=0,this.closeSocketCount=0,this.closeSocketCountLastCheck=0,this.errorSocketCount=0,this.errorSocketCountLastCheck=0,this.requestCount=0,this.requestCountLastCheck=0,this.timeoutSocketCount=0,this.timeoutSocketCountLastCheck=0}get freeSocketKeepAliveTimeout(){return Ir("agent.freeSocketKeepAliveTimeout is deprecated, please use agent.options.freeSocketTimeout instead"),this.options.freeSocketTimeout}get timeout(){return Ir("agent.timeout is deprecated, please use agent.options.timeout instead"),this.options.timeout}get socketActiveTTL(){return Ir("agent.socketActiveTTL is deprecated, please use agent.options.socketActiveTTL instead"),this.options.socketActiveTTL}keepSocketAlive(e){const t=super.keepSocketAlive(e);if(!t)return t;let r=this.options.freeSocketTimeout;const s=this.options.socketActiveTTL;if(s){const t=Date.now()-e[Nr],n=s-t;if(n<=0)return Lr("%s(requests: %s, finished: %s) free but need to destroy by TTL, alive %sms(max %sms)",e[$r],e[jr],e[Dr],t,s),!1;r&&n<r&&(Lr("%s(requests: %s, finished: %s) free and wait for %sms TTL timeout",e[$r],e[jr],e[Dr],n),r=n)}if(r){const t=e.freeSocketTimeout||e.freeSocketKeepAliveTimeout;t&&t<r&&(r=t),e.setTimeout(r)}return!0}reuseSocket(...e){super.reuseSocket(...e);const t=e[0];e[1].reusedSocket=!0;const r=this.options.timeout;Mr(t)!==r&&(t.setTimeout(r),Lr("%s reset timeout to %sms",t[$r],r)),t[jr]++,Lr("%s(requests: %s, finished: %s) reuse on addRequest, timeout %sms",t[$r],t[jr],t[Dr],Mr(t))}[xr](){const e=this[kr]++;return this[kr]===Number.MAX_SAFE_INTEGER&&(this[kr]=0),e}[Cr](e,t){if(t.timeout){Mr(e)||e.setTimeout(t.timeout)}this.options.keepAlive&&e.setNoDelay(!0),this.createSocketCount++,this.options.socketActiveTTL&&(e[Nr]=Date.now()),e[$r]=`sock[${this[xr]()}#${t._agentKey}]`.split("-----BEGIN",1)[0],e[jr]=1,e[Dr]=0,function(e,t,r){function s(){if(!t._httpMessage&&1===t[jr])return;t[Dr]++,e.requestCount++,Lr("%s(requests: %s, finished: %s) free",t[$r],t[jr],t[Dr]);const s=e.getName(r);t.writable&&e.requests[s]&&e.requests[s].length&&(t[jr]++,Lr("%s(requests: %s, finished: %s) will be reuse on agent free event",t[$r],t[jr],t[Dr]))}function n(r){Lr("%s(requests: %s, finished: %s) close, isError: %s",t[$r],t[jr],t[Dr],r),e.closeSocketCount++}function o(){const s=t.listeners("timeout").length,n=Mr(t),o=t._httpMessage,i=o&&o.listeners("timeout").length||0;Lr("%s(requests: %s, finished: %s) timeout after %sms, listeners %s, defaultTimeoutListenerCount %s, hasHttpRequest %s, HttpRequest timeoutListenerCount %s",t[$r],t[jr],t[Dr],n,s,Pr,!!o,i),Lr.enabled&&Lr("timeout listeners: %s",t.listeners("timeout").map(e=>e.name).join(", ")),e.timeoutSocketCount++;const a=e.getName(r);if(e.freeSockets[a]&&-1!==e.freeSockets[a].indexOf(t))t.destroy(),e.removeSocket(t,r),Lr("%s is free, destroy quietly",t[$r]);else if(0===i){const s=new Error("Socket timeout");s.code="ERR_SOCKET_TIMEOUT",s.timeout=n,t.destroy(s),e.removeSocket(t,r),Lr("%s destroy with timeout error",t[$r])}}function i(r){const s=t.listeners("error").length;Lr("%s(requests: %s, finished: %s) error: %s, listenerCount: %s",t[$r],t[jr],t[Dr],r,s),e.errorSocketCount++,1===s&&(Lr("%s emit uncaught error event",t[$r]),t.removeListener("error",i),t.emit("error",r))}Lr("%s create, timeout %sms",t[$r],Mr(t)),t.on("free",s),t.on("close",n),t.on("timeout",o),t.on("error",i),t.on("agentRemove",(function e(){Lr("%s(requests: %s, finished: %s) agentRemove",t[$r],t[jr],t[Dr]),t.removeListener("close",n),t.removeListener("error",i),t.removeListener("free",s),t.removeListener("timeout",o),t.removeListener("agentRemove",e)}))}(this,e,t)}createConnection(e,t){let r=!1;const s=(s,n)=>{if(!r){if(r=!0,s)return this.createSocketErrorCount++,t(s);this[Cr](n,e),t(s,n)}},n=super.createConnection(e,s);n&&s(null,n)}get statusChanged(){const e=this.createSocketCount!==this.createSocketCountLastCheck||this.createSocketErrorCount!==this.createSocketErrorCountLastCheck||this.closeSocketCount!==this.closeSocketCountLastCheck||this.errorSocketCount!==this.errorSocketCountLastCheck||this.timeoutSocketCount!==this.timeoutSocketCountLastCheck||this.requestCount!==this.requestCountLastCheck;return e&&(this.createSocketCountLastCheck=this.createSocketCount,this.createSocketErrorCountLastCheck=this.createSocketErrorCount,this.closeSocketCountLastCheck=this.closeSocketCount,this.errorSocketCountLastCheck=this.errorSocketCount,this.timeoutSocketCountLastCheck=this.timeoutSocketCount,this.requestCountLastCheck=this.requestCount),e}getCurrentStatus(){return{createSocketCount:this.createSocketCount,createSocketErrorCount:this.createSocketErrorCount,closeSocketCount:this.closeSocketCount,errorSocketCount:this.errorSocketCount,timeoutSocketCount:this.timeoutSocketCount,requestCount:this.requestCount,freeSockets:Hr(this.freeSockets),sockets:Hr(this.sockets),requests:Hr(this.requests)}}};function Hr(e){const t={};for(const r in e)t[r]=e[r].length;return t}const Fr=n.Agent,{INIT_SOCKET:qr,CREATE_HTTPS_CONNECTION:zr}=Or;class Gr extends Ur{constructor(e){super(e),this.defaultPort=443,this.protocol="https:",this.maxCachedSessions=this.options.maxCachedSessions,void 0===this.maxCachedSessions&&(this.maxCachedSessions=100),this._sessionCache={map:{},list:[]}}createConnection(e){const t=this[zr](e);return this[qr](t,e),t}}Gr.prototype[zr]=Fr.prototype.createConnection,["getName","_getSession","_cacheSession","_evictSession"].forEach((function(e){"function"==typeof Fr.prototype[e]&&(Gr.prototype[e]=Fr.prototype[e])}));var Zr=Ur,Xr=Gr,Wr=Or;function Vr(){}function Kr(e,t){const r=Kr.spread(e,t),s=r.then(e=>e[0]);return s.cancel=r.cancel,s}Zr.HttpsAgent=Xr,Zr.constants=Wr,function(e){e.spread=function(e,t){let r=null;const s=new Promise((n,o)=>{function i(){e.removeListener(t,a),e.removeListener("error",c),s.cancel=Vr}function a(...e){i(),n(e)}function c(e){i(),o(e)}r=i,e.on(t,a),e.on("error",c)});if(!r)throw new TypeError("Could not get `cancel()` function");return s.cancel=r,s}}(Kr||(Kr={}));var Yr=Kr,Jr=_((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,r){return new Promise((s,n)=>{e.call(this,t,r,(e,t)=>{e?n(e):s(t)})})}}}));v(Jr);var Qr=_((function(e){var t=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=t(Sr),s=t(Jr),n=r.default("agent-base");function o(){const{stack:e}=new Error;return"string"==typeof e&&e.split("\n").some(e=>-1!==e.indexOf("(https.js:"))}function i(e,t){return new i.Agent(e,t)}!function(e){class t extends c.EventEmitter{constructor(e,t){super();let r=t;"function"==typeof e?this.callback=e:e&&(r=e),this.timeout=null,r&&"number"==typeof r.timeout&&(this.timeout=r.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.sockets={},this.requests={}}get defaultPort(){return"number"==typeof this.explicitDefaultPort?this.explicitDefaultPort:o()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){return"string"==typeof this.explicitProtocol?this.explicitProtocol:o()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,r){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const r=Object.assign({},t);"boolean"!=typeof r.secureEndpoint&&(r.secureEndpoint=o()),null==r.host&&(r.host="localhost"),null==r.port&&(r.port=r.secureEndpoint?443:80),null==r.protocol&&(r.protocol=r.secureEndpoint?"https:":"http:"),r.host&&r.path&&delete r.path,delete r.agent,delete r.hostname,delete r._defaultAgent,delete r.defaultPort,delete r.createConnection,e._last=!0,e.shouldKeepAlive=!1;let i=!1,a=null;const c=r.timeout||this.timeout,h=t=>{e._hadError||(e.emit("error",t),e._hadError=!0)},u=()=>{a=null,i=!0;const e=new Error(`A "socket" was not created for HTTP request before ${c}ms`);e.code="ETIMEOUT",h(e)},l=e=>{i||(null!==a&&(clearTimeout(a),a=null),h(e))},p=t=>{if(i)return;if(null!=a&&(clearTimeout(a),a=null),s=t,Boolean(s)&&"function"==typeof s.addRequest)return n("Callback returned another Agent instance %o",t.constructor.name),void t.addRequest(e,r);var s;if(t)return t.once("free",()=>{this.freeSocket(t,r)}),void e.onSocket(t);const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);h(o)};if("function"==typeof this.callback){this.promisifiedCallback||(this.callback.length>=3?(n("Converting legacy callback function to promise"),this.promisifiedCallback=s.default(this.callback)):this.promisifiedCallback=this.callback),"number"==typeof c&&c>0&&(a=setTimeout(u,c)),"port"in r&&"number"!=typeof r.port&&(r.port=Number(r.port));try{n("Resolving socket for %o request: %o",r.protocol,`${e.method} ${e.path}`),Promise.resolve(this.promisifiedCallback(e,r)).then(p,l)}catch(e){Promise.reject(e).catch(l)}}else h(new Error("`callback` is not defined"))}freeSocket(e,t){n("Freeing socket %o %o",e.constructor.name,t),e.destroy()}destroy(){n("Destroying agent %o",this.constructor.name)}}e.Agent=t,e.prototype=e.Agent.prototype}(i||(i={})),e.exports=i}));v(Qr);var es=_((function(e,t){var s=E&&E.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))},n=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(p),i=n(f),a=n(r),c=n(Sr),h=n(Yr),u=c.default("http-proxy-agent");class l extends Qr.Agent{constructor(e){let t;if(t="string"==typeof e?a.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");u("Creating new HttpProxyAgent instance: %o",t),super(t);const r=Object.assign({},t);var s;this.secureProxy=t.secureProxy||"string"==typeof(s=r.protocol)&&/^https:?$/i.test(s),r.host=r.hostname||r.host,"string"==typeof r.port&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,t){return s(this,void 0,void 0,(function*(){const{proxy:r,secureProxy:s}=this,n=a.default.parse(e.path);let c;if(n.protocol||(n.protocol="http:"),n.hostname||(n.hostname=t.hostname||t.host||null),null==n.port&&(t.port,1)&&(n.port=String(t.port)),"80"===n.port&&delete n.port,e.path=a.default.format(n),r.auth&&e.setHeader("Proxy-Authorization","Basic "+Buffer.from(r.auth).toString("base64")),s?(u("Creating `tls.Socket`: %o",r),c=i.default.connect(r)):(u("Creating `net.Socket`: %o",r),c=o.default.connect(r)),e._header){let t,r;u("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(u("Patching connection write() output buffer with updated header"),t=e.output[0],r=t.indexOf("\r\n\r\n")+4,e.output[0]=e._header+t.substring(r),u("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(u("Patching connection write() output buffer with updated header"),t=e.outputData[0].data,r=t.indexOf("\r\n\r\n")+4,e.outputData[0].data=e._header+t.substring(r),u("Output buffer: %o",e.outputData[0].data))}return yield h.default(c,"connect"),c}))}}t.default=l}));v(es);var ts=_((function(e){const t=(E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(es);function r(e){return new t.default(e)}!function(e){e.HttpProxyAgent=t.default,e.prototype=t.default.prototype}(r||(r={})),e.exports=r}));v(ts);var rs=_((function(e,t){var r=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(Sr).default("https-proxy-agent:parse-proxy-response");t.default=function(e){return new Promise((t,r)=>{let n=0;const o=[];function i(){const r=e.read();r?function(e){o.push(e),n+=e.length;const r=Buffer.concat(o,n);if(-1===r.indexOf("\r\n\r\n"))return s("have not received end of HTTP headers yet..."),void i();const a=r.toString("ascii",0,r.indexOf("\r\n")),c=+a.split(" ")[1];s("got proxy server response: %o",a),t({statusCode:c,buffered:r})}(r):e.once("readable",i)}function a(e){s("onclose had error %o",e)}function c(){s("onend")}function h(t){e.removeListener("end",c),e.removeListener("error",h),e.removeListener("close",a),e.removeListener("readable",i),s("onerror %o",t),r(t)}e.on("error",h),e.on("close",a),e.on("end",c),i()})}}));v(rs);var ss=_((function(e,t){var s=E&&E.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{c(s.next(e))}catch(e){o(e)}}function a(e){try{c(s.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))},n=E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(p),a=n(f),c=n(r),h=n(o),u=n(Sr),l=n(rs),d=u.default("https-proxy-agent:agent");class m extends Qr.Agent{constructor(e){let t;if(t="string"==typeof e?c.default.parse(e):e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");d("creating new HttpsProxyAgent instance: %o",t),super(t);const r=Object.assign({},t);var s;this.secureProxy=t.secureProxy||"string"==typeof(s=r.protocol)&&/^https:?$/i.test(s),r.host=r.hostname||r.host,"string"==typeof r.port&&(r.port=parseInt(r.port,10)),!r.port&&r.host&&(r.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in r)&&(r.ALPNProtocols=["http 1.1"]),r.host&&r.path&&(delete r.path,delete r.pathname),this.proxy=r}callback(e,t){return s(this,void 0,void 0,(function*(){const{proxy:r,secureProxy:s}=this;let n;s?(d("Creating `tls.Socket`: %o",r),n=a.default.connect(r)):(d("Creating `net.Socket`: %o",r),n=i.default.connect(r));const o=Object.assign({},r.headers);let c=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r\n`;r.auth&&(o["Proxy-Authorization"]="Basic "+Buffer.from(r.auth).toString("base64"));let{host:u,port:p,secureEndpoint:f}=t;(function(e,t){return Boolean(!t&&80===e||t&&443===e)})(p,f)||(u+=":"+p),o.Host=u,o.Connection="close";for(const e of Object.keys(o))c+=`${e}: ${o[e]}\r\n`;const m=l.default(n);n.write(c+"\r\n");const{statusCode:y,buffered:E}=yield m;if(200===y){if(e.once("socket",g),t.secureEndpoint){const e=t.servername||t.host;if(!e)throw new Error('Could not determine "servername"');return d("Upgrading socket connection to TLS"),a.default.connect(Object.assign(Object.assign({},function(e,...t){const r={};let s;for(s in e)t.includes(s)||(r[s]=e[s]);return r}(t,"host","hostname","path","port")),{socket:n,servername:e}))}return n}n.destroy();const v=new i.default.Socket;return v.readable=!0,e.once("socket",e=>{d("replaying proxy buffer for failed request"),h.default(e.listenerCount("data")>0),e.push(E),e.push(null)}),v}))}}function g(e){e.resume()}t.default=m}));v(ss);var ns=_((function(e){const t=(E&&E.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(ss);function r(e){return new t.default(e)}!function(e){e.HttpsProxyAgent=t.default,e.prototype=t.default.prototype}(r||(r={})),e.exports=r}));v(ns);const os=new mr({max:50});let is,as;var cs=function(e,t){const o=new r.URL("string"==typeof e?e:e.url),i="https:"===o.protocol,a=ds(o.href,t),c=hs(t.timeout),h=us(t.maxSockets),u=["https:"+i,a?`proxy:${a.protocol}//${a.host}:${a.port}`:">no-proxy<","local-address:"+(t.localAddress||">no-local-address<"),"strict-ssl:"+(i?!!t.strictSSL:">no-strict-ssl<"),"ca:"+(i&&t.ca||">no-ca<"),"cert:"+(i&&t.cert||">no-cert<"),"key:"+(i&&t.key||">no-key<"),"timeout:"+c,"maxSockets:"+h].join(":");if(null!=t.agent)return t.agent;const l=gr?i?n.globalAgent:s.globalAgent:null;if(gr&&!a)return l;if(os.peek(u))return os.get(u);if(a){const e=gr?{...t,agent:l}:t,r=_s(a,e,i);return os.set(u,r),r}is||(as=Zr,is=as.HttpsAgent);const p=i?new is({maxSockets:h,ca:t.ca,cert:t.cert,key:t.key,localAddress:t.localAddress,rejectUnauthorized:t.strictSSL,timeout:c}):new as({maxSockets:h,localAddress:t.localAddress,timeout:c});return os.set(u,p),p};const hs=e=>"number"==typeof e&&e?e+1:0,us=e=>e||15;var ls=ps;function ps(e){if(!e)return;let t;if(Array.isArray(e))for(const r of e)if(t=process.env[r]||process.env[r.toUpperCase()]||process.env[r.toLowerCase()],void 0!==t)break;return"string"==typeof e&&(t=process.env[e]||process.env[e.toUpperCase()]||process.env[e.toLowerCase()]),t}var fs=ds;function ds(e,t){const s=new r.URL(e).protocol,n=t.proxy||"https:"===s&&ps("https_proxy")||"http:"===s&&ps(["https_proxy","http_proxy","proxy"]);if(!n)return null;const o="string"==typeof n?new r.URL(n):n;return!function(e,t){const s=new r.URL(e).hostname.split(".").reverse();let n=t.noProxy||ps("no_proxy");return"string"==typeof n&&(n=n.split(/\s*,\s*/g)),n&&n.some(e=>{const t=e.split(".").filter(e=>e).reverse();if(!t.length)return!1;for(let e=0;e<t.length;e++)if(s[e]!==t[e])return!1;return!0})}(e,t)&&o}const ms=e=>e.username&&e.password?`${e.username}:${e.password}`:e.username?e.username:null;let gs,ys,Es;var vs=_s;function _s(e,t,r){const s={host:e.hostname,port:e.port,protocol:e.protocol,path:(n=e,n.pathname+n.search+n.hash),auth:ms(e),ca:t.ca,cert:t.cert,key:t.key,timeout:hs(t.timeout),localAddress:t.localAddress,maxSockets:us(t.maxSockets),rejectUnauthorized:t.strictSSL};var n;if("http:"===e.protocol||"https:"===e.protocol)return r?(ys||(ys=ns),new ys(s)):(gs||(gs=ts),new gs(s));if(e.protocol.startsWith("socks"))return Es||(Es=ue),new Es(s);throw Object.assign(new Error(`unsupported proxy protocol: '${e.protocol}'`),{url:e.href})}cs.getProcessEnv=ls,cs.getProxyUri=fs,cs.getProxy=vs;var bs=function(e,t,s,n){const o=new r.URL(e.url).host,i=JSON.stringify(s),a=JSON.stringify((new Date).toUTCString()),c=n?"set":"append";e.headers[c]("Warning",`${t} ${o} ${i} ${a}`)};const ws=Symbol("_flush"),Rs=Symbol("_flushed"),Ts=Symbol("_flushing");var Os=class extends Q{constructor(e={}){if("function"==typeof e&&(e={flush:e}),super(e),"function"!=typeof e.flush&&"function"!=typeof this.flush)throw new TypeError("must provide flush function in options");this[ws]=e.flush||this.flush}emit(e,...t){if("end"!==e&&"finish"!==e||this[Rs])return super.emit(e,...t);if(this[Ts])return;this[Ts]=!0;const r=e=>{this[Rs]=!0,e?super.emit("error",e):super.emit("end")},s=this[ws](r);s&&s.then&&s.then(()=>r(),e=>r(e))}};const Ss=Symbol("_data"),As=Symbol("_length");var Ls=class extends Q{constructor(e){super(e),this[Ss]=[],this[As]=0}write(e,t,r){"function"==typeof t&&(r=t,t="utf8"),t||(t="utf8");const s=Buffer.isBuffer(e)?e:Buffer.from(e,t);return this[Ss].push(s),this[As]+=s.length,r&&r(),!0}end(e,t,r){"function"==typeof e&&(r=e,e=null),"function"==typeof t&&(r=t,t="utf8"),e&&this.write(e,t);const s=Buffer.concat(this[Ss],this[As]);return super.write(s),super.end(r)}};var Is=class extends Q{constructor(e){super(e),this[Ss]=[],this[As]=0}write(e,t,r){"function"==typeof t&&(r=t,t="utf8"),t||(t="utf8");const s=Buffer.isBuffer(e)?e:Buffer.from(e,t);return this[Ss].push(s),this[As]+=s.length,super.write(e,t,r)}end(e,t,r){"function"==typeof e&&(r=e,e=null),"function"==typeof t&&(r=t,t="utf8"),e&&this.write(e,t);const s=Buffer.concat(this[Ss],this[As]);return this.emit("collect",s),super.end(r)}};Ls.PassThrough=Is;function Cs(e){const t=new r.URL(e.url);return"make-fetch-happen:request-cache:"+r.format({protocol:t.protocol,slashes:!0,port:t.port,hostname:t.hostname,pathname:t.pathname})}function ks(e,t,r,s,n){e.set("X-Local-Cache",encodeURIComponent(t)),e.set("X-Local-Cache-Key",encodeURIComponent(r)),e.set("X-Local-Cache-Hash",encodeURIComponent(s)),e.set("X-Local-Cache-Time",new Date(n).toUTCString())}var xs=function(e){"string"==typeof e.cacheManager&&(e.cacheManager=new class{constructor(e,t){this._path=e,this.Promise=t&&t.Promise||Promise}match(e,t){const s=Cs(e);return ue.get.info(this._path,s).then(e=>e&&ue.get.hasContent(this._path,e.integrity,t).then(t=>t&&e)).then(n=>{if(n&&n.metadata&&function(e,t){const s=new r.URL(e.url),n=new r.URL(t.url),o=t.resHeaders.get("Vary");if(o){if(o.match(/\*/))return!1;if(!o.split(/\s*,\s*/).every(r=>t.reqHeaders.get(r)===e.headers.get(r)))return!1}if(t.integrity)return ue.parse(t.integrity).match(t.cacheIntegrity);return s.hash=null,n.hash=null,r.format(s)===r.format(n)}(e,{url:n.metadata.url,reqHeaders:new mt.Headers(n.metadata.reqHeaders),resHeaders:new mt.Headers(n.metadata.resHeaders),cacheIntegrity:n.integrity,integrity:t&&t.integrity})){const r=new mt.Headers(n.metadata.resHeaders);if(ks(r,this._path,s,n.integrity,n.time),"HEAD"===e.method)return new mt.Response(null,{url:e.url,headers:r,status:200});const o=this._path,i=new Q,a=n.size<5242880,c=()=>i.removeListener("resume",h),h=!1!==t.memoize&&a?()=>{const e=ue.get.stream.byDigest(o,n.integrity,{memoize:t.memoize});e.on("error",e=>{i.emit("error",e)}),e.pipe(i)}:()=>{c(),ue.get.byDigest(o,n.integrity,{memoize:t.memoize}).then(e=>i.end(e)).catch(e=>{i.emit("error",e)})};return i.once("resume",h),i.once("end",()=>c),this.Promise.resolve(new mt.Response(i,{url:e.url,headers:r,status:200,size:n.size}))}})}put(e,t,r){r=r||{};const s=t.headers.get("content-length"),n=!!s&&!1!==r.memoize&&s<5242880,o=Cs(e),i={algorithms:r.algorithms,metadata:{url:e.url,reqHeaders:e.headers.raw(),resHeaders:t.headers.raw()},size:s,memoize:n&&r.memoize};if("HEAD"===e.method||304===t.status)return ue.get.info(this._path,o).then(e=>(i.integrity=e.integrity,ks(t.headers,this._path,o,e.integrity,e.time),new Gt(ue.get.stream.byDigest(this._path,e.integrity,i),ue.put.stream(this._path,o,i)).promise().then(()=>t)));const a=t.body,c=new Gt(new Os({flush:()=>l}));let h,u;const l=new Promise((e,t)=>{h=e,u=t}),p=this._path;if(n){const e=new Ls.PassThrough;e.on("collect",e=>{ue.put(p,o,e,i).then(h,u)}),c.unshift(e)}else{const e=new Q,t=ue.put.stream(p,o,i);e.pipe(t),t.promise().then(h,u),c.unshift(e)}return c.unshift(a),Promise.resolve(new mt.Response(c,t))}delete(e,t){return"object"==typeof(t=t||{}).memoize&&(t.memoize.reset?t.memoize.reset():t.memoize.clear?t.memoize.clear():Object.keys(t.memoize).forEach(e=>{t.memoize[e]=null})),ue.rm.entry(this._path,Cs(e)).then(()=>!1)}}(e.cacheManager,e)),e.cache=e.cache||"default","default"===e.cache&&function(e){if(!e||"object"!=typeof e)return!1;const t=["if-modified-since","if-none-match","if-unmodified-since","if-match","if-range"];return Object.keys(e).some(e=>-1!==t.indexOf(e.toLowerCase()))}(e.headers)&&(e.cache="no-store")},Ns=function(e){const t=Object.assign({},e||{});if(t.method=(t.method||"GET").toUpperCase(),t.retry)if("object"!=typeof t.retry){if("number"==typeof t.retry&&(t.retry={retries:t.retry}),"string"==typeof t.retry){const e=parseInt(t.retry,10);t.retry=e?{retries:e}:{retries:0}}}else t.retry=Object.assign({},{retries:0},t.retry);else t.retry={retries:0};return t.cacheManager&&xs(t),t},$s=function(e){const t={};for(const r of e.keys())t[r]=e.get(r);return t};const js=new Set([200,203,204,206,300,301,404,405,410,414,501]),Ds=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),Ps=new Set([500,502,503,504]),Bs={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},Ms={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Us(e){const t=parseInt(e,10);return isFinite(t)?t:0}function Hs(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,s]=e.split(/\s*=\s*/,2);t[r]=void 0===s||s.replace(/^"|"$/g,"")}return t}function Fs(e){let t=[];for(const r in e){const s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}var qs=function(e,t){const r={url:e.url,method:e.method,headers:$s(e.headers)},s={status:t.status,headers:$s(t.headers)};return new class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:n,ignoreCargoCult:o,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==n?n:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=Hs(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=Hs(e.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Fs(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!Ds.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||js.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=Hs(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma))return!1;if(t["max-age"]&&this.age()>t["max-age"])return!1;if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])return!1;if(this.stale()){if(!(t["max-stale"]&&!this._rescc["must-revalidate"]&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))return!1}return this._requestMatches(e,!1)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)Bs[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?e.warning+", ":"")+'113 - "rfc7234 5.5.4"'),e.age=""+Math.round(t),e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return Us(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Us(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Us(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+Us(this._rescc["stale-if-error"]),r=e+Us(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Us(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Us(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag);if(t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||Ps.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const s={};for(const e in this._resHeaders)s[e]=e in t.headers&&!Ms[e]?t.headers[e]:this._resHeaders[e];const n=Object.assign({},t,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,n,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}(r,s,{shared:!1})},zs=b(St);let Gs;const Zs=/^https?:/,Xs=`${zs.name}/${zs.version} (+https://npm.im/${zs.name})`,Ws=["ECONNRESET","ECONNREFUSED","EADDRINUSE","ETIMEDOUT"],Vs=["request-timeout"];var Ks=Ys;function Ys(e,t){const r=Ns(t);r.integrity&&(Gs||(Gs=ue),r.compress=!1);if(("GET"===r.method||"HEAD"===r.method)&&Boolean(r.cacheManager)&&"no-store"!==r.cache&&"reload"!==r.cache){const t=new mt.Request(e,{method:r.method,headers:r.headers});return r.cacheManager.match(t,r).then(s=>{if(s){const e=(s.headers.get("Warning")||"").match(/^\d+/);if(e&&+e>=100&&+e<200&&s.headers.delete("Warning"),"default"===r.cache&&!function(e,t){const r={url:e.url,method:e.method,headers:$s(e.headers)},s=qs(e,t),n=t.headers.get("x-local-cache-time")||t.headers.get("date")||0;s._responseTime=new Date(n);const o=!s.satisfiesWithoutRevalidation(r),i=s.responseHeaders();i.warning&&/^113\b/.test(i.warning)&&t.headers.append("warning",i.warning);return o}(t,s))return s;if("default"===r.cache||"no-cache"===r.cache)return function(e,t,r){const s={url:e.url,method:e.method,headers:Object.assign({},r.headers||{})},n=qs(e,t);return r.headers=n.revalidationHeaders(s),Qs(e.url,r).then(o=>{const i=n.revalidatedPolicy(s,{status:o.status,headers:$s(o.headers)});if(o.status>=500&&!Js(t))return bs(t,111,"Revalidation failed"),t;if(304===o.status){const s=new mt.Response(t.body,o);return r.cacheManager.put(e,s,r).then(e=>{const t=i.policy.responseHeaders(),r=[...e.headers.keys()].filter(e=>!t[e]);for(const t of r)e.headers.delete(t);for(const[r,s]of Object.entries(t))e.headers.set(r,s);return e})}return o}).then(e=>e).catch(e=>{if(Js(t))throw e;return bs(t,111,"Revalidation failed"),bs(t,199,`Miscellaneous Warning ${e.code}: ${e.message}`),t})}(t,s,r);if("force-cache"===r.cache||"only-if-cached"===r.cache)return bs(s,112,"Disconnected operation"),s}if(!s&&"only-if-cached"===r.cache){const t=new Error(`request to ${e} failed: cache mode is 'only-if-cached' but no cached response available.`);throw t.code="ENOTCACHED",t}return Qs(t.url,r)})}return Qs(e,r)}function Js(e){return(e.headers.get("cache-control")||"").match(/must-revalidate/i)}function Qs(e,t){const s=cs(e,t),n=t.headers instanceof mt.Headers?t.headers:new mt.Headers(t.headers);n.get("connection")||n.set("connection",s?"keep-alive":"close"),n.get("user-agent")||n.set("user-agent",Xs);const o={agent:s,body:t.body,compress:t.compress,follow:t.follow,headers:n,method:t.method,redirect:"manual",size:t.size,counter:t.counter,timeout:t.timeout};return $t((s,n)=>{const i=new mt.Request(e,o);return mt(i).then(o=>{t.integrity&&(o=function(e,t){const r=e.body,s=Gs.integrityStream({integrity:t});return new mt.Response(new Gt(r,s),e)}(o,t.integrity)),o.headers.set("x-fetch-attempts",n);const a=Q.isStream(i.body);if(t.cacheManager){const e="GET"===i.method||"HEAD"===i.method;if("no-store"!==t.cache&&e&&qs(i,o).storable()&&200===o.status)return t.cacheManager.put(i,o,t);if(!e)return t.cacheManager.delete(i).then(()=>o.status>=500&&"POST"!==i.method&&!a?("function"==typeof t.onRetry&&t.onRetry(o),s(o)):o)}if("POST"!==i.method&&!a&&(408===o.status||420===o.status||429===o.status||o.status>=500))return"function"==typeof t.onRetry&&t.onRetry(o),s(o);if(!mt.isRedirect(o.status))return o;if("manual"===t.redirect)return o;if("error"===t.redirect){throw new mt.FetchError("redirect mode is set to error: "+e,"no-redirect",{code:"ENOREDIRECT"})}if(!o.headers.get("location")){throw new mt.FetchError("redirect location header missing at: "+e,"no-location",{code:"EINVALIDREDIRECT"})}if(i.counter>=i.follow){throw new mt.FetchError("maximum redirect reached at: "+e,"max-redirect",{code:"EMAXREDIRECT"})}const c=new r.URL(o.headers.get("location"),i.url),h=r.format(c),u=Zs.test(o.headers.get("location"))?new r.URL(o.headers.get("location")):c;return new r.URL(i.url).hostname!==u.hostname&&i.headers.delete("authorization"),303!==o.status&&("POST"!==i.method||301!==o.status&&302!==o.status)||(t.method="GET",t.body=null,i.headers.delete("content-length")),t.headers={},i.headers.forEach((e,r)=>{t.headers[r]=e}),t.counter=++i.counter,Ys(h,t)}).catch(e=>{const r="EPROMISERETRY"===e.code?e.retried.code:e.code,n=-1===Ws.indexOf(r)&&-1===Vs.indexOf(e.type);if("POST"===i.method||n)throw e;return"function"==typeof t.onRetry&&t.onRetry(e),s(e)})},t.retry).catch(e=>{if(e.status>=400&&"system"!==e.type)return e;throw e})}Ys.defaults=function(e,t){const r=this;function s(s,n){const o=Object.assign({},t||{},n||{});return r(s||e,o)}return"object"==typeof e&&(t=e,e=null),s.defaults=r.defaults,s.delete=r.delete,s},Ys.delete=function(e,t){if((t=Ns(t)).cacheManager){const r=new mt.Request(e,{method:t.method,headers:t.headers});return t.cacheManager.delete(r,t)}};var en=function(e,t){t||(t={});var r={bools:{},strings:{},unknownFn:null};"function"==typeof t.unknown&&(r.unknownFn=t.unknown),"boolean"==typeof t.boolean&&t.boolean?r.allBools=!0:[].concat(t.boolean).filter(Boolean).forEach((function(e){r.bools[e]=!0}));var s={};Object.keys(t.alias||{}).forEach((function(e){s[e]=[].concat(t.alias[e]),s[e].forEach((function(t){s[t]=[e].concat(s[e].filter((function(e){return t!==e})))}))})),[].concat(t.string).filter(Boolean).forEach((function(e){r.strings[e]=!0,s[e]&&(r.strings[s[e]]=!0)}));var n=t.default||{},o={_:[]};Object.keys(r.bools).forEach((function(e){a(e,void 0!==n[e]&&n[e])}));var i=[];function a(e,t,n){if(!n||!r.unknownFn||function(e,t){return r.allBools&&/^--[^=]+$/.test(t)||r.strings[e]||r.bools[e]||s[e]}(e,n)||!1!==r.unknownFn(n)){var i=!r.strings[e]&&tn(t)?Number(t):t;c(o,e.split("."),i),(s[e]||[]).forEach((function(e){c(o,e.split("."),i)}))}}function c(e,t,s){for(var n=e,o=0;o<t.length-1;o++){if("__proto__"===(i=t[o]))return;void 0===n[i]&&(n[i]={}),n[i]!==Object.prototype&&n[i]!==Number.prototype&&n[i]!==String.prototype||(n[i]={}),n[i]===Array.prototype&&(n[i]=[]),n=n[i]}var i;"__proto__"!==(i=t[t.length-1])&&(n!==Object.prototype&&n!==Number.prototype&&n!==String.prototype||(n={}),n===Array.prototype&&(n=[]),void 0===n[i]||r.bools[i]||"boolean"==typeof n[i]?n[i]=s:Array.isArray(n[i])?n[i].push(s):n[i]=[n[i],s])}function h(e){return s[e].some((function(e){return r.bools[e]}))}-1!==e.indexOf("--")&&(i=e.slice(e.indexOf("--")+1),e=e.slice(0,e.indexOf("--")));for(var u=0;u<e.length;u++){var l=e[u];if(/^--.+=/.test(l)){var p=l.match(/^--([^=]+)=([\s\S]*)$/),f=p[1],d=p[2];r.bools[f]&&(d="false"!==d),a(f,d,l)}else if(/^--no-.+/.test(l)){a(f=l.match(/^--no-(.+)/)[1],!1,l)}else if(/^--.+/.test(l)){f=l.match(/^--(.+)/)[1];void 0===(E=e[u+1])||/^-/.test(E)||r.bools[f]||r.allBools||s[f]&&h(f)?/^(true|false)$/.test(E)?(a(f,"true"===E,l),u++):a(f,!r.strings[f]||"",l):(a(f,E,l),u++)}else if(/^-[^-]+/.test(l)){for(var m=l.slice(1,-1).split(""),g=!1,y=0;y<m.length;y++){var E;if("-"!==(E=l.slice(y+2))){if(/[A-Za-z]/.test(m[y])&&/=/.test(E)){a(m[y],E.split("=")[1],l),g=!0;break}if(/[A-Za-z]/.test(m[y])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(E)){a(m[y],E,l),g=!0;break}if(m[y+1]&&m[y+1].match(/\W/)){a(m[y],l.slice(y+2),l),g=!0;break}a(m[y],!r.strings[m[y]]||"",l)}else a(m[y],E,l)}f=l.slice(-1)[0];g||"-"===f||(!e[u+1]||/^(-|--)[^-]/.test(e[u+1])||r.bools[f]||s[f]&&h(f)?e[u+1]&&/^(true|false)$/.test(e[u+1])?(a(f,"true"===e[u+1],l),u++):a(f,!r.strings[f]||"",l):(a(f,e[u+1],l),u++))}else if(r.unknownFn&&!1===r.unknownFn(l)||o._.push(r.strings._||!tn(l)?l:Number(l)),t.stopEarly){o._.push.apply(o._,e.slice(u+1));break}}return Object.keys(n).forEach((function(e){var t,r,i;t=o,r=e.split("."),i=t,r.slice(0,-1).forEach((function(e){i=i[e]||{}})),r[r.length-1]in i||(c(o,e.split("."),n[e]),(s[e]||[]).forEach((function(t){c(o,t.split("."),n[e])})))})),t["--"]?(o["--"]=new Array,i.forEach((function(e){o["--"].push(e)}))):i.forEach((function(e){o._.push(e)})),o};function tn(e){return"number"==typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e))}var rn=function(e){return Buffer.from(e,"base64").toString("utf8")},sn=function(e){return Buffer.from(e,"utf8").toString("base64")},nn=_((function(e,t){t.parse=t.decode=function(e){var t={},r=t,n=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i;return e.split(/[\r\n]+/g).forEach((function(e,s,a){if(e&&!e.match(/^\s*[;#]/)){var c=e.match(o);if(c){if(void 0!==c[1])return n=i(c[1]),void(r=t[n]=t[n]||{});var h=i(c[2]),u=!c[3]||i(c[4]);switch(u){case"true":case"false":case"null":u=JSON.parse(u)}h.length>2&&"[]"===h.slice(-2)&&(h=h.substring(0,h.length-2),r[h]?Array.isArray(r[h])||(r[h]=[r[h]]):r[h]=[]),Array.isArray(r[h])?r[h].push(u):r[h]=u}}})),Object.keys(t).filter((function(e,r,n){if(!t[e]||"object"!=typeof t[e]||Array.isArray(t[e]))return!1;var o=s(e),i=t,a=o.pop(),c=a.replace(/\\\./g,".");return o.forEach((function(e,t,r){i[e]&&"object"==typeof i[e]||(i[e]={}),i=i[e]})),(i!==t||c!==a)&&(i[c]=t[e],!0)})).forEach((function(e,r,s){delete t[e]})),t},t.stringify=t.encode=function e(t,n){var i=[],a="";"string"==typeof n?n={section:n,whitespace:!1}:(n=n||{}).whitespace=!0===n.whitespace;var c=n.whitespace?" = ":"=";Object.keys(t).forEach((function(e,s,n){var h=t[e];h&&Array.isArray(h)?h.forEach((function(t){a+=o(e+"[]")+c+o(t)+"\n"})):h&&"object"==typeof h?i.push(e):a+=o(e)+c+o(h)+r})),n.section&&a.length&&(a="["+o(n.section)+"]"+r+a);return i.forEach((function(o,i,c){var h=s(o).join("\\."),u=(n.section?n.section+".":"")+h,l=e(t[o],{section:u,whitespace:n.whitespace});a.length&&l.length&&(a+=r),a+=l})),a},t.safe=o,t.unsafe=i;var r="undefined"!=typeof process&&"win32"===process.platform?"\r\n":"\n";function s(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map((function(e){return e.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")}))}function n(e){return'"'===e.charAt(0)&&'"'===e.slice(-1)||"'"===e.charAt(0)&&"'"===e.slice(-1)}function o(e){return"string"!=typeof e||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&n(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function i(e,t){if(!n(e=(e||"").trim())){for(var r=!1,s="",o=0,i=e.length;o<i;o++){var a=e.charAt(o);if(r)-1!=="\\;#".indexOf(a)?s+=a:s+="\\"+a,r=!1;else{if(-1!==";#".indexOf(a))break;"\\"===a?r=!0:s+=a}}return r&&(s+="\\"),s.trim()}"'"===e.charAt(0)&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch(e){}return e}}));nn.parse,nn.decode,nn.stringify,nn.encode,nn.safe,nn.unsafe;function on(){return""}function an(e,t,r){return e.slice(t,r).replace(/\S/g," ")}var cn=_((function(e,t){var r=t.parse=function(e){return/^\s*{/.test(e)?JSON.parse(function(e,t){for(var r,s,n=!1,o=!1,i=0,a="",c=!1===(t=t||{}).whitespace?on:an,h=0;h<e.length;h++){if(r=e[h],s=e[h+1],!o&&'"'===r)"\\"===e[h-1]&&"\\"!==e[h-2]||(n=!n);if(!n)if(o||r+s!=="//"){if(1===o&&r+s==="\r\n"){o=!1,a+=c(e,i,++h),i=h;continue}if(1===o&&"\n"===r)o=!1,a+=c(e,i,h),i=h;else{if(!o&&r+s==="/*"){a+=e.slice(i,h),i=h,o=2,h++;continue}if(2===o&&r+s==="*/"){o=!1,a+=c(e,i,++h+1),i=h+1;continue}}}else a+=e.slice(i,h),i=h,o=1,h++}return a+(o?c(e.substr(i)):e.substr(i))}(e)):nn.parse(e)},s=t.file=function(){var e=[].slice.call(arguments).filter((function(e){return null!=e}));for(var t in e)if("string"!=typeof e[t])return;var r=m.join.apply(null,e);try{return d.readFileSync(r,"utf-8")}catch(e){return}};t.json=function(){var e=s.apply(null,arguments);return e?r(e):null},t.env=function(e,t){t=t||process.env;var r={},s=e.length;for(var n in t)if(0===n.toLowerCase().indexOf(e.toLowerCase())){for(var o,i=n.substring(s).split("__");(o=i.indexOf(""))>-1;)i.splice(o,1);var a=r;i.forEach((function(e,r){e&&"object"==typeof a&&(r===i.length-1&&(a[e]=t[n]),void 0===a[e]&&(a[e]={}),a=a[e])}))}return r},t.find=function(){var e=m.join.apply(null,[].slice.call(arguments));function t(e,r){var s=m.join(e,r);try{return d.statSync(s),s}catch(s){if(m.dirname(e)!==e)return t(m.dirname(e),r)}}return t(process.cwd(),e)}})),hn=(cn.parse,cn.file,cn.json,cn.env,cn.find,_((function(e){function t(e){return e instanceof Buffer||e instanceof Date||e instanceof RegExp}function r(e){if(e instanceof Buffer){var t=Buffer.alloc?Buffer.alloc(e.length):new Buffer(e.length);return e.copy(t),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);throw new Error("Unexpected situation")}function s(e){var n=[];return e.forEach((function(e,i){"object"==typeof e&&null!==e?Array.isArray(e)?n[i]=s(e):t(e)?n[i]=r(e):n[i]=o({},e):n[i]=e})),n}function n(e,t){return"__proto__"===t?void 0:e[t]}var o=e.exports=function(){if(arguments.length<1||"object"!=typeof arguments[0])return!1;if(arguments.length<2)return arguments[0];var e,i,a=arguments[0],c=Array.prototype.slice.call(arguments,1);return c.forEach((function(c){"object"!=typeof c||null===c||Array.isArray(c)||Object.keys(c).forEach((function(h){return i=n(a,h),(e=n(c,h))===a?void 0:"object"!=typeof e||null===e?void(a[h]=e):Array.isArray(e)?void(a[h]=s(e)):t(e)?void(a[h]=r(e)):"object"!=typeof i||null===i||Array.isArray(i)?void(a[h]=o({},e)):void(a[h]=o(i,e))}))})),a}}))),un=m.join,ln="win32"===process.platform,pn=ln?process.env.USERPROFILE:process.env.HOME,fn=function(e,t,r,s){if("string"!=typeof e)throw new Error("rc(name): name *must* be string");r||(r=en(process.argv.slice(2))),t=("string"==typeof t?cn.json(t):t)||{},s=s||cn.parse;var n=cn.env(e+"_"),o=[t],i=[];function a(e){if(!(i.indexOf(e)>=0)){var t=cn.file(e);t&&(o.push(s(t)),i.push(e))}}return ln||[un("/etc",e,"config"),un("/etc",e+"rc")].forEach(a),pn&&[un(pn,".config",e,"config"),un(pn,".config",e),un(pn,"."+e,"config"),un(pn,"."+e+"rc")].forEach(a),a(cn.find("."+e+"rc")),n.config&&a(n.config),r.config&&a(r.config),hn.apply(null,o.concat([n,r,i.length?{configs:i,config:i[i.length-1]}:void 0]))},dn=rn,mn=sn;function gn(e,t){for(var s,n=r.parse(e,!1,!0);"/"!==s&&n.pathname!==s;){s=n.pathname||"/";var o=vn("//"+n.host+s.replace(/\/$/,""),t.npmrc);if(o)return o;if(!t.recursive)return/\/$/.test(e)?void 0:gn(r.resolve(e,"."),t);n.pathname=r.resolve(En(s),"..")||"/"}}function yn(e){if(e._auth)return{token:_n(e._auth),type:"Basic"}}function En(e){return"/"===e[e.length-1]?e:e+"/"}function vn(e,t){var r=function(e){if(!e)return;return{token:_n(e),type:"Bearer"}}(t[e+":_authToken"]||t[e+"/:_authToken"]);if(r)return r;var s=function(e,t){if(!e||!t)return;var r=dn(_n(t));return{token:mn(e+":"+r),type:"Basic",password:r,username:e}}(t[e+":username"]||t[e+"/:username"],t[e+":_password"]||t[e+"/:_password"]);if(s)return s;var n=function(e){if(!e)return;return{token:_n(e),type:"Basic"}}(t[e+":_auth"]||t[e+"/:_auth"]);return n||void 0}function _n(e){return e.replace(/^\$\{?([^}]*)\}?$/,(function(e,t){return process.env[t]}))}var bn={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16};var wn="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},Rn=_((function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=bn,s=(t=e.exports={}).re=[],n=t.src=[],o=t.t={};let i=0;const a=(e,t,r)=>{const a=i++;wn(a,t),o[e]=a,n[a]=t,s[a]=new RegExp(t,r?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","[0-9]+"),a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),a("MAINVERSION",`(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})\\.(${n[o.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})\\.(${n[o.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${n[o.NUMERICIDENTIFIER]}|${n[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${n[o.NUMERICIDENTIFIERLOOSE]}|${n[o.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${n[o.PRERELEASEIDENTIFIER]}(?:\\.${n[o.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${n[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${n[o.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER","[0-9A-Za-z-]+"),a("BUILD",`(?:\\+(${n[o.BUILDIDENTIFIER]}(?:\\.${n[o.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${n[o.MAINVERSION]}${n[o.PRERELEASE]}?${n[o.BUILD]}?`),a("FULL",`^${n[o.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${n[o.MAINVERSIONLOOSE]}${n[o.PRERELEASELOOSE]}?${n[o.BUILD]}?`),a("LOOSE",`^${n[o.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",n[o.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),a("XRANGEIDENTIFIER",n[o.NUMERICIDENTIFIER]+"|x|X|\\*"),a("XRANGEPLAIN",`[v=\\s]*(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:\\.(${n[o.XRANGEIDENTIFIER]})(?:${n[o.PRERELEASE]})?${n[o.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${n[o.XRANGEIDENTIFIERLOOSE]})(?:${n[o.PRERELEASELOOSE]})?${n[o.BUILD]}?)?)?`),a("XRANGE",`^${n[o.GTLT]}\\s*${n[o.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${n[o.GTLT]}\\s*${n[o.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),a("COERCERTL",n[o.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${n[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",a("TILDE",`^${n[o.LONETILDE]}${n[o.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${n[o.LONETILDE]}${n[o.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${n[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",a("CARET",`^${n[o.LONECARET]}${n[o.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${n[o.LONECARET]}${n[o.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${n[o.GTLT]}\\s*(${n[o.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${n[o.GTLT]}\\s*(${n[o.LOOSEPLAIN]}|${n[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${n[o.XRANGEPLAIN]})\\s+-\\s+(${n[o.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${n[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${n[o.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0.0.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}));Rn.re,Rn.src,Rn.t,Rn.tildeTrimReplace,Rn.caretTrimReplace,Rn.comparatorTrimReplace;const Tn=/^[0-9]+$/,On=(e,t)=>{const r=Tn.test(e),s=Tn.test(t);return r&&s&&(e=+e,t=+t),e===t?0:r&&!s?-1:s&&!r?1:e<t?-1:1};var Sn={compareIdentifiers:On,rcompareIdentifiers:(e,t)=>On(t,e)};const{MAX_LENGTH:An,MAX_SAFE_INTEGER:Ln}=bn,{re:In,t:Cn}=Rn,{compareIdentifiers:kn}=Sn;class xn{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof xn){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>An)throw new TypeError(`version is longer than ${An} characters`);wn("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?In[Cn.LOOSE]:In[Cn.FULL]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Ln||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ln||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ln||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Ln)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(wn("SemVer.compare",this.version,this.options,e),!(e instanceof xn)){if("string"==typeof e&&e===this.version)return 0;e=new xn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof xn||(e=new xn(e,this.options)),kn(this.major,e.major)||kn(this.minor,e.minor)||kn(this.patch,e.patch)}comparePre(e){if(e instanceof xn||(e=new xn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],s=e.prerelease[t];if(wn("prerelease compare",t,r,s),void 0===r&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===r)return-1;if(r!==s)return kn(r,s)}while(++t)}compareBuild(e){e instanceof xn||(e=new xn(e,this.options));let t=0;do{const r=this.build[t],s=e.build[t];if(wn("prerelease compare",t,r,s),void 0===r&&void 0===s)return 0;if(void 0===s)return 1;if(void 0===r)return-1;if(r!==s)return kn(r,s)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this}}var Nn=xn;const{MAX_LENGTH:$n}=bn,{re:jn,t:Dn}=Rn;var Pn=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Nn)return e;if("string"!=typeof e)return null;if(e.length>$n)return null;if(!(t.loose?jn[Dn.LOOSE]:jn[Dn.FULL]).test(e))return null;try{return new Nn(e,t)}catch(e){return null}};var Bn=(e,t)=>{const r=Pn(e,t);return r?r.version:null};var Mn=(e,t)=>{const r=Pn(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var Un=(e,t,r,s)=>{"string"==typeof r&&(s=r,r=void 0);try{return new Nn(e,r).inc(t,s).version}catch(e){return null}};var Hn=(e,t,r)=>new Nn(e,r).compare(new Nn(t,r));var Fn=(e,t,r)=>0===Hn(e,t,r);var qn=(e,t)=>{if(Fn(e,t))return null;{const r=Pn(e),s=Pn(t),n=r.prerelease.length||s.prerelease.length,o=n?"pre":"",i=n?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==s[e])return o+e;return i}};var zn=(e,t)=>new Nn(e,t).major;var Gn=(e,t)=>new Nn(e,t).minor;var Zn=(e,t)=>new Nn(e,t).patch;var Xn=(e,t)=>{const r=Pn(e,t);return r&&r.prerelease.length?r.prerelease:null};var Wn=(e,t,r)=>Hn(t,e,r);var Vn=(e,t)=>Hn(e,t,!0);var Kn=(e,t,r)=>{const s=new Nn(e,r),n=new Nn(t,r);return s.compare(n)||s.compareBuild(n)};var Yn=(e,t)=>e.sort((e,r)=>Kn(e,r,t));var Jn=(e,t)=>e.sort((e,r)=>Kn(r,e,t));var Qn=(e,t,r)=>Hn(e,t,r)>0;var eo=(e,t,r)=>Hn(e,t,r)<0;var to=(e,t,r)=>0!==Hn(e,t,r);var ro=(e,t,r)=>Hn(e,t,r)>=0;var so=(e,t,r)=>Hn(e,t,r)<=0;var no=(e,t,r,s)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Fn(e,r,s);case"!=":return to(e,r,s);case">":return Qn(e,r,s);case">=":return ro(e,r,s);case"<":return eo(e,r,s);case"<=":return so(e,r,s);default:throw new TypeError("Invalid operator: "+t)}};const{re:oo,t:io}=Rn;var ao=(e,t)=>{if(e instanceof Nn)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=oo[io.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),oo[io.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;oo[io.COERCERTL].lastIndex=-1}else r=e.match(oo[io.COERCE]);return null===r?null:Pn(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};class co{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof co)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new co(e.raw,t);if(e instanceof ko)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=this.options.loose;e=e.trim();const r=t?uo[lo.HYPHENRANGELOOSE]:uo[lo.HYPHENRANGE];e=e.replace(r,Ao(this.options.includePrerelease)),wn("hyphen replace",e),e=e.replace(uo[lo.COMPARATORTRIM],po),wn("comparator trim",e,uo[lo.COMPARATORTRIM]),e=(e=(e=e.replace(uo[lo.TILDETRIM],fo)).replace(uo[lo.CARETTRIM],mo)).split(/\s+/).join(" ");const s=t?uo[lo.COMPARATORLOOSE]:uo[lo.COMPARATOR];return e.split(" ").map(e=>yo(e,this.options)).join(" ").split(/\s+/).map(e=>So(e,this.options)).filter(this.options.loose?e=>!!e.match(s):()=>!0).map(e=>new ko(e,this.options))}intersects(e,t){if(!(e instanceof co))throw new TypeError("a Range is required");return this.set.some(r=>go(r,t)&&e.set.some(e=>go(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Nn(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(Lo(this.set[t],e,this.options))return!0;return!1}}var ho=co;const{re:uo,t:lo,comparatorTrimReplace:po,tildeTrimReplace:fo,caretTrimReplace:mo}=Rn,go=(e,t)=>{let r=!0;const s=e.slice();let n=s.pop();for(;r&&s.length;)r=s.every(e=>n.intersects(e,t)),n=s.pop();return r},yo=(e,t)=>(wn("comp",e,t),e=bo(e,t),wn("caret",e),e=vo(e,t),wn("tildes",e),e=Ro(e,t),wn("xrange",e),e=Oo(e,t),wn("stars",e),e),Eo=e=>!e||"x"===e.toLowerCase()||"*"===e,vo=(e,t)=>e.trim().split(/\s+/).map(e=>_o(e,t)).join(" "),_o=(e,t)=>{const r=t.loose?uo[lo.TILDELOOSE]:uo[lo.TILDE];return e.replace(r,(t,r,s,n,o)=>{let i;return wn("tilde",e,t,r,s,n,o),Eo(r)?i="":Eo(s)?i=`>=${r}.0.0 <${+r+1}.0.0-0`:Eo(n)?i=`>=${r}.${s}.0 <${r}.${+s+1}.0-0`:o?(wn("replaceTilde pr",o),i=`>=${r}.${s}.${n}-${o} <${r}.${+s+1}.0-0`):i=`>=${r}.${s}.${n} <${r}.${+s+1}.0-0`,wn("tilde return",i),i})},bo=(e,t)=>e.trim().split(/\s+/).map(e=>wo(e,t)).join(" "),wo=(e,t)=>{wn("caret",e,t);const r=t.loose?uo[lo.CARETLOOSE]:uo[lo.CARET],s=t.includePrerelease?"-0":"";return e.replace(r,(t,r,n,o,i)=>{let a;return wn("caret",e,t,r,n,o,i),Eo(r)?a="":Eo(n)?a=`>=${r}.0.0${s} <${+r+1}.0.0-0`:Eo(o)?a="0"===r?`>=${r}.${n}.0${s} <${r}.${+n+1}.0-0`:`>=${r}.${n}.0${s} <${+r+1}.0.0-0`:i?(wn("replaceCaret pr",i),a="0"===r?"0"===n?`>=${r}.${n}.${o}-${i} <${r}.${n}.${+o+1}-0`:`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${o}-${i} <${+r+1}.0.0-0`):(wn("no pr"),a="0"===r?"0"===n?`>=${r}.${n}.${o}${s} <${r}.${n}.${+o+1}-0`:`>=${r}.${n}.${o}${s} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${o} <${+r+1}.0.0-0`),wn("caret return",a),a})},Ro=(e,t)=>(wn("replaceXRanges",e,t),e.split(/\s+/).map(e=>To(e,t)).join(" ")),To=(e,t)=>{e=e.trim();const r=t.loose?uo[lo.XRANGELOOSE]:uo[lo.XRANGE];return e.replace(r,(r,s,n,o,i,a)=>{wn("xRange",e,r,s,n,o,i,a);const c=Eo(n),h=c||Eo(o),u=h||Eo(i),l=u;return"="===s&&l&&(s=""),a=t.includePrerelease?"-0":"",c?r=">"===s||"<"===s?"<0.0.0-0":"*":s&&l?(h&&(o=0),i=0,">"===s?(s=">=",h?(n=+n+1,o=0,i=0):(o=+o+1,i=0)):"<="===s&&(s="<",h?n=+n+1:o=+o+1),"<"===s&&(a="-0"),r=`${s+n}.${o}.${i}${a}`):h?r=`>=${n}.0.0${a} <${+n+1}.0.0-0`:u&&(r=`>=${n}.${o}.0${a} <${n}.${+o+1}.0-0`),wn("xRange return",r),r})},Oo=(e,t)=>(wn("replaceStars",e,t),e.trim().replace(uo[lo.STAR],"")),So=(e,t)=>(wn("replaceGTE0",e,t),e.trim().replace(uo[t.includePrerelease?lo.GTE0PRE:lo.GTE0],"")),Ao=e=>(t,r,s,n,o,i,a,c,h,u,l,p,f)=>`${r=Eo(s)?"":Eo(n)?`>=${s}.0.0${e?"-0":""}`:Eo(o)?`>=${s}.${n}.0${e?"-0":""}`:i?">="+r:`>=${r}${e?"-0":""}`} ${c=Eo(h)?"":Eo(u)?`<${+h+1}.0.0-0`:Eo(l)?`<${h}.${+u+1}.0-0`:p?`<=${h}.${u}.${l}-${p}`:e?`<${h}.${u}.${+l+1}-0`:"<="+c}`.trim(),Lo=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(wn(e[r].semver),e[r].semver!==ko.ANY&&e[r].semver.prerelease.length>0){const s=e[r].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},Io=Symbol("SemVer ANY");class Co{static get ANY(){return Io}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof Co){if(e.loose===!!t.loose)return e;e=e.value}wn("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Io?this.value="":this.value=this.operator+this.semver.version,wn("comp",this)}parse(e){const t=this.options.loose?xo[No.COMPARATORLOOSE]:xo[No.COMPARATOR],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new Nn(r[2],this.options.loose):this.semver=Io}toString(){return this.value}test(e){if(wn("Comparator.test",e,this.options.loose),this.semver===Io||e===Io)return!0;if("string"==typeof e)try{e=new Nn(e,this.options)}catch(e){return!1}return no(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Co))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new ho(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new ho(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),s=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),n=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),i=no(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),a=no(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||s||n&&o||i||a}}var ko=Co;const{re:xo,t:No}=Rn;var $o=(e,t,r)=>{try{t=new ho(t,r)}catch(e){return!1}return t.test(e)};var jo=(e,t)=>new ho(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "));var Do=(e,t,r)=>{let s=null,n=null,o=null;try{o=new ho(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(s&&-1!==n.compare(e)||(s=e,n=new Nn(s,r)))}),s};var Po=(e,t,r)=>{let s=null,n=null,o=null;try{o=new ho(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(s&&1!==n.compare(e)||(s=e,n=new Nn(s,r)))}),s};var Bo=(e,t)=>{e=new ho(e,t);let r=new Nn("0.0.0");if(e.test(r))return r;if(r=new Nn("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){e.set[t].forEach(e=>{const t=new Nn(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!Qn(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}})}return r&&e.test(r)?r:null};var Mo=(e,t)=>{try{return new ho(e,t).range||"*"}catch(e){return null}};const{ANY:Uo}=ko;var Ho=(e,t,r,s)=>{let n,o,i,a,c;switch(e=new Nn(e,s),t=new ho(t,s),r){case">":n=Qn,o=so,i=eo,a=">",c=">=";break;case"<":n=eo,o=ro,i=Qn,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($o(e,t,s))return!1;for(let r=0;r<t.set.length;++r){const h=t.set[r];let u=null,l=null;if(h.forEach(e=>{e.semver===Uo&&(e=new ko(">=0.0.0")),u=u||e,l=l||e,n(e.semver,u.semver,s)?u=e:i(e.semver,l.semver,s)&&(l=e)}),u.operator===a||u.operator===c)return!1;if((!l.operator||l.operator===a)&&o(e,l.semver))return!1;if(l.operator===c&&i(e,l.semver))return!1}return!0};var Fo=(e,t,r)=>Ho(e,t,">",r);var qo=(e,t,r)=>Ho(e,t,"<",r);var zo=(e,t,r)=>(e=new ho(e,r),t=new ho(t,r),e.intersects(t));const{ANY:Go}=ko,Zo=(e,t,r)=>{if(1===e.length&&e[0].semver===Go)return 1===t.length&&t[0].semver===Go;const s=new Set;let n,o,i,a,c,h,u;for(const t of e)">"===t.operator||">="===t.operator?n=Xo(n,t,r):"<"===t.operator||"<="===t.operator?o=Wo(o,t,r):s.add(t.semver);if(s.size>1)return null;if(n&&o){if(i=Hn(n.semver,o.semver,r),i>0)return null;if(0===i&&(">="!==n.operator||"<="!==o.operator))return null}for(const e of s){if(n&&!$o(e,String(n),r))return null;if(o&&!$o(e,String(o),r))return null;for(const s of t)if(!$o(e,String(s),r))return!1;return!0}for(const e of t){if(u=u||">"===e.operator||">="===e.operator,h=h||"<"===e.operator||"<="===e.operator,n)if(">"===e.operator||">="===e.operator){if(a=Xo(n,e,r),a===e)return!1}else if(">="===n.operator&&!$o(n.semver,String(e),r))return!1;if(o)if("<"===e.operator||"<="===e.operator){if(c=Wo(o,e,r),c===e)return!1}else if("<="===o.operator&&!$o(o.semver,String(e),r))return!1;if(!e.operator&&(o||n)&&0!==i)return!1}return!(n&&h&&!o&&0!==i)&&!(o&&u&&!n&&0!==i)},Xo=(e,t,r)=>{if(!e)return t;const s=Hn(e.semver,t.semver,r);return s>0?e:s<0||">"===t.operator&&">="===e.operator?t:e},Wo=(e,t,r)=>{if(!e)return t;const s=Hn(e.semver,t.semver,r);return s<0?e:s>0||"<"===t.operator&&"<="===e.operator?t:e};var Vo=(e,t,r)=>{e=new ho(e,r),t=new ho(t,r);let s=!1;e:for(const n of e.set){for(const e of t.set){const t=Zo(n,e,r);if(s=s||null!==t,t)continue e}if(s)return!1}return!0},Ko={re:Rn.re,src:Rn.src,tokens:Rn.t,SEMVER_SPEC_VERSION:bn.SEMVER_SPEC_VERSION,SemVer:Nn,compareIdentifiers:Sn.compareIdentifiers,rcompareIdentifiers:Sn.rcompareIdentifiers,parse:Pn,valid:Bn,clean:Mn,inc:Un,diff:qn,major:zn,minor:Gn,patch:Zn,prerelease:Xn,compare:Hn,rcompare:Wn,compareLoose:Vn,compareBuild:Kn,sort:Yn,rsort:Jn,gt:Qn,lt:eo,eq:Fn,neq:to,gte:ro,lte:so,cmp:no,coerce:ao,Comparator:ko,Range:ho,satisfies:$o,toComparators:jo,maxSatisfying:Do,minSatisfying:Po,minVersion:Bo,validRange:Mo,outside:Ho,gtr:Fo,ltr:qo,intersects:zo,simplifyRange:(e,t,r)=>{const s=[];let n=null,o=null;const i=e.sort((e,t)=>Hn(e,t,r));for(const e of i){$o(e,t,r)?(o=e,n||(n=e)):(o&&s.push([n,o]),o=null,n=null)}n&&s.push([n,null]);const a=[];for(const[e,t]of s)e===t?a.push(e):t||e!==i[0]?t?e===i[0]?a.push("<="+t):a.push(`${e} - ${t}`):a.push(">="+e):a.push("*");const c=a.join(" || "),h="string"==typeof t.raw?t.raw:String(t);return c.length<h.length?c:t},subset:Vo};function Yo(e){var t=/\.[^.]*$/.exec(e);return t?t.index+1:e.length}function Jo(e,t,r){if(e.reduce)return e.reduce(t,r);for(var s=0,n=arguments.length>=3?r:e[s++];s<e.length;s++)t(n,e[s],s);return n}function Qo(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t.call(e,e[r],r)}function ei(e,t){if(e.map)return e.map(t);for(var r=[],s=0;s<e.length;s++)r.push(t.call(e,e[s],s));return r}var ti=_((function(e){var t=e.exports={github:{protocols:["git","http","git+ssh","git+https","ssh","https"],domain:"github.com",treepath:"tree",filetemplate:"https://{auth@}raw.githubusercontent.com/{user}/{project}/{committish}/{path}",bugstemplate:"https://{domain}/{user}/{project}/issues",gittemplate:"git://{auth@}{domain}/{user}/{project}.git{#committish}",tarballtemplate:"https://codeload.{domain}/{user}/{project}/tar.gz/{committish}"},bitbucket:{protocols:["git+ssh","git+https","ssh","https"],domain:"bitbucket.org",treepath:"src",tarballtemplate:"https://{domain}/{user}/{project}/get/{committish}.tar.gz"},gitlab:{protocols:["git+ssh","git+https","ssh","https"],domain:"gitlab.com",treepath:"tree",bugstemplate:"https://{domain}/{user}/{project}/issues",httpstemplate:"git+https://{auth@}{domain}/{user}/{projectPath}.git{#committish}",tarballtemplate:"https://{domain}/{user}/{project}/repository/archive.tar.gz?ref={committish}",pathmatch:/^[/]([^/]+)[/]((?!.*(\/-\/|\/repository\/archive\.tar\.gz\?=.*|\/repository\/[^/]+\/archive.tar.gz$)).*?)(?:[.]git|[/])?$/},gist:{protocols:["git","git+ssh","git+https","ssh","https"],domain:"gist.github.com",pathmatch:/^[/](?:([^/]+)[/])?([a-z0-9]{32,})(?:[.]git)?$/,filetemplate:"https://gist.githubusercontent.com/{user}/{project}/raw{/committish}/{path}",bugstemplate:"https://{domain}/{project}",gittemplate:"git://{domain}/{project}.git{#committish}",sshtemplate:"git@{domain}:/{project}.git{#committish}",sshurltemplate:"git+ssh://git@{domain}/{project}.git{#committish}",browsetemplate:"https://{domain}/{project}{/committish}",browsefiletemplate:"https://{domain}/{project}{/committish}{#path}",docstemplate:"https://{domain}/{project}{/committish}",httpstemplate:"git+https://{domain}/{project}.git{#committish}",shortcuttemplate:"{type}:{project}{#committish}",pathtemplate:"{project}{#committish}",tarballtemplate:"https://codeload.github.com/gist/{project}/tar.gz/{committish}",hashformat:function(e){return"file-"+s(e)}}},r={sshtemplate:"git@{domain}:{user}/{project}.git{#committish}",sshurltemplate:"git+ssh://git@{domain}/{user}/{project}.git{#committish}",browsetemplate:"https://{domain}/{user}/{project}{/tree/committish}",browsefiletemplate:"https://{domain}/{user}/{project}/{treepath}/{committish}/{path}{#fragment}",docstemplate:"https://{domain}/{user}/{project}{/tree/committish}#readme",httpstemplate:"git+https://{auth@}{domain}/{user}/{project}.git{#committish}",filetemplate:"https://{domain}/{user}/{project}/raw/{committish}/{path}",shortcuttemplate:"{type}:{user}/{project}{#committish}",pathtemplate:"{user}/{project}{#committish}",pathmatch:/^[/]([^/]+)[/]([^/]+?)(?:[.]git|[/])?$/,hashformat:s};function s(e){return e.toLowerCase().replace(/^\W+|\/|\W+$/g,"").replace(/\W+/g,"-")}Object.keys(t).forEach((function(e){Object.keys(r).forEach((function(s){t[e][s]||(t[e][s]=r[s])})),t[e].protocols_re=RegExp("^("+t[e].protocols.map((function(e){return e.replace(/([\\+*{}()[\]$^|])/g,"\\$1")})).join("|")+"):$")}))})),ri=(ti.github,ti.bitbucket,ti.gitlab,ti.gist,Object.assign||function(e,t){if(null===t||"object"!=typeof t)return e;const r=Object.keys(t);let s=r.length;for(;s--;)e[r[s]]=t[r[s]];return e}),si=ni;function ni(e,t,r,s,n,o,i){var a=this;a.type=e,Object.keys(ti[e]).forEach((function(t){a[t]=ti[e][t]})),a.user=t,a.auth=r,a.project=s,a.committish=n,a.default=o,a.opts=i||{}}ni.prototype.hash=function(){return this.committish?"#"+this.committish:""},ni.prototype._fill=function(e,t){if(e){var r=ri({},t);r.path=r.path?r.path.replace(/^[/]+/g,""):"",t=ri(ri({},this.opts),t);var s=this;Object.keys(this).forEach((function(e){null!=s[e]&&null==r[e]&&(r[e]=s[e])}));var n=r.auth,o=r.committish,i=r.fragment,a=r.path,c=r.project;Object.keys(r).forEach((function(e){var t=r[e];"path"!==e&&"project"!==e||"string"!=typeof t?"domain"!==e&&(r[e]=encodeURIComponent(t)):r[e]=t.split("/").map((function(e){return encodeURIComponent(e)})).join("/")})),r["auth@"]=n?n+"@":"",r["#fragment"]=i?"#"+this.hashformat(i):"",r.fragment=r.fragment?r.fragment:"",r["#path"]=a?"#"+this.hashformat(a):"",r["/path"]=r.path?"/"+r.path:"",r.projectPath=c.split("/").map(encodeURIComponent).join("/"),t.noCommittish?(r["#committish"]="",r["/tree/committish"]="",r["/committish"]="",r.committish=""):(r["#committish"]=o?"#"+o:"",r["/tree/committish"]=r.committish?"/"+r.treepath+"/"+r.committish:"",r["/committish"]=r.committish?"/"+r.committish:"",r.committish=r.committish||"master");var h=e;return Object.keys(r).forEach((function(e){h=h.replace(new RegExp("[{]"+e+"[}]","g"),r[e])})),t.noGitPlus?h.replace(/^git[+]/,""):h}},ni.prototype.ssh=function(e){return this._fill(this.sshtemplate,e)},ni.prototype.sshurl=function(e){return this._fill(this.sshurltemplate,e)},ni.prototype.browse=function(e,t,r){return"string"==typeof e?("string"!=typeof t&&(r=t,t=null),this._fill(this.browsefiletemplate,ri({fragment:t,path:e},r))):this._fill(this.browsetemplate,e)},ni.prototype.docs=function(e){return this._fill(this.docstemplate,e)},ni.prototype.bugs=function(e){return this._fill(this.bugstemplate,e)},ni.prototype.https=function(e){return this._fill(this.httpstemplate,e)},ni.prototype.git=function(e){return this._fill(this.gittemplate,e)},ni.prototype.shortcut=function(e){return this._fill(this.shortcuttemplate,e)},ni.prototype.path=function(e){return this._fill(this.pathtemplate,e)},ni.prototype.tarball=function(e){var t=ri({},e,{noCommittish:!1});return this._fill(this.tarballtemplate,t)},ni.prototype.file=function(e,t){return this._fill(this.filetemplate,ri({path:e},t))},ni.prototype.getDefaultRepresentation=function(){return this.default},ni.prototype.toString=function(e){return this.default&&"function"==typeof this[this.default]?this[this.default](e):this.sshurl(e)};var oi=_((function(e){var t=e.exports=si,s=new mr({max:1e3}),n={"git+ssh:":"sshurl","git+https:":"https","ssh:":"sshurl","git:":"git"};var o={"git:":!0,"https:":!0,"git+https:":!0,"http:":!0,"git+http:":!0};function i(e){var t=r.parse(e);return"gist:"===t.protocol&&t.host&&!t.path?t.protocol+"/"+t.host:e}function a(e){var t=e.match(/^([^@]+)@([^:/]+):[/]?((?:[^/]+[/])?[^/]+?)(?:[.]git)?(#.*)?$/);if(!t){var s=r.parse(e);if(s.auth){const t=e.match(/[^@]+@[^:/]+/);if(t){var n=new r.URL(t[0]);s.auth=n.username||"",n.password&&(s.auth+=":"+n.password)}}return s}return{protocol:"git+ssh:",slashes:!0,auth:t[1],host:t[2],port:null,hostname:t[2],hash:t[4],search:null,query:null,pathname:"/"+t[3],path:"/"+t[3],href:"git+ssh://"+t[1]+"@"+t[2]+"/"+t[3]+(t[4]||"")}}e.exports.fromUrl=function(e,r){if("string"==typeof e){var c=e+JSON.stringify(r||{});return s.has(c)||s.set(c,function(e,r){if(null==e||""===e)return;var s=i((l=e,/^[^:@%/\s.-][^:@%/\s]*[/][^:@\s/%]+(?:#.*)?$/.test(l)?"github:"+e:e)),c=a(s),h=s.match(new RegExp("^([^:]+):(?:(?:[^@:]+(?:[^@]+)?@)?([^/]*))[/](.+?)(?:[.]git)?($|#)")),u=Object.keys(ti).map((function(e){try{var s=ti[e],i=null;c.auth&&o[c.protocol]&&(i=c.auth);var a=c.hash?decodeURIComponent(c.hash.substr(1)):null,u=null,l=null,p=null;if(h&&h[1]===e)u=h[2]&&decodeURIComponent(h[2]),l=decodeURIComponent(h[3]),p="shortcut";else{if(c.host&&c.host!==s.domain&&c.host.replace(/^www[.]/,"")!==s.domain)return;if(!s.protocols_re.test(c.protocol))return;if(!c.path)return;var f=s.pathmatch,d=c.path.match(f);if(!d)return;null!==d[1]&&void 0!==d[1]&&(u=decodeURIComponent(d[1].replace(/^:/,""))),l=decodeURIComponent(d[2]),m=c.protocol,p=n[m]||m.slice(0,-1)}return new t(e,u,i,l,a,p,r)}catch(e){if(!(e instanceof URIError))throw e}var m})).filter((function(e){return e}));var l;if(1!==u.length)return;return u[0]}(e,r)),s.get(c)}}}));oi.fromUrl;const ii={node:">=10"},ai={test:"make test"},ci=["dependencies","update","updates","check","checker","npm","yarn","packages"],hi=["updates"],ui={"@rollup/plugin-commonjs":"12.0.0","@rollup/plugin-json":"4.0.3","@rollup/plugin-node-resolve":"8.0.0","ansi-regex":"5.0.0",colorette:"1.2.0",del:"5.1.0",eslint:"7.1.0","eslint-config-silverwind":"13.4.2",execa:"4.0.2","hosted-git-info":"3.0.4",jest:"26.0.1","make-fetch-happen":"8.0.7",minimist:"1.2.5","node-fetch":"2.6.0",rc:"1.2.8","registry-auth-token":"4.1.1",restana:"4.4.1",rollup:"2.10.9","rollup-plugin-hashbang":"2.2.2","rollup-plugin-terser":"6.1.0",semver:"7.3.2",tempy:"0.5.0","text-table":"0.2.0",versions:"8.2.10"},li={verbose:!1,testTimeout:1e4};var pi={name:"updates",version:"10.2.13",description:"Flexible npm dependency update tool",author:"silverwind",repository:"silverwind/updates",license:"BSD-2-Clause",bin:"./updates",engines:ii,scripts:ai,keywords:ci,files:hi,devDependencies:ui,jest:li},fi=Object.freeze({__proto__:null,name:"updates",version:"10.2.13",description:"Flexible npm dependency update tool",author:"silverwind",repository:"silverwind/updates",license:"BSD-2-Clause",bin:"./updates",engines:ii,scripts:ai,keywords:ci,files:hi,devDependencies:ui,jest:li,default:pi});let di=!("NO_COLOR"in process.env)&&("FORCE_COLOR"in process.env||"win32"===process.platform||null!=process.stdout&&process.stdout.isTTY&&process.env.TERM&&"dumb"!==process.env.TERM);const mi=(e,t,r,s)=>n=>di?e+(~(n+="").indexOf(t,4)?n.replace(r,s):n)+t:n,gi=(e,t)=>mi(`[${e}m`,`[${t}m`,new RegExp(`\\x1b\\[${t}m`,"g"),`[${e}m`);var yi={options:Object.defineProperty({},"enabled",{get:()=>di,set:e=>di=e}),reset:gi(0,0),bold:mi("[1m","[22m",/\x1b\[22m/g,"[22m[1m"),dim:mi("[2m","[22m",/\x1b\[22m/g,"[22m[2m"),italic:gi(3,23),underline:gi(4,24),inverse:gi(7,27),hidden:gi(8,28),strikethrough:gi(9,29),black:gi(30,39),red:gi(31,39),green:gi(32,39),yellow:gi(33,39),blue:gi(34,39),magenta:gi(35,39),cyan:gi(36,39),white:gi(37,39),gray:gi(90,39),bgBlack:gi(40,49),bgRed:gi(41,49),bgGreen:gi(42,49),bgYellow:gi(43,49),bgBlue:gi(44,49),bgMagenta:gi(45,49),bgCyan:gi(46,49),bgWhite:gi(47,49),blackBright:gi(90,39),redBright:gi(91,39),greenBright:gi(92,39),yellowBright:gi(93,39),blueBright:gi(94,39),magentaBright:gi(95,39),cyanBright:gi(96,39),whiteBright:gi(97,39),bgBlackBright:gi(100,49),bgRedBright:gi(101,49),bgGreenBright:gi(102,49),bgYellowBright:gi(103,49),bgBlueBright:gi(104,49),bgMagentaBright:gi(105,49),bgCyanBright:gi(106,49),bgWhiteBright:gi(107,49)},Ei=b(fi);const vi=(({onlyFirst:e=!1}={})=>{const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")})(),{cwd:_i,stdout:bi,argv:wi,env:Ri,exit:Ti}=g,{fromUrl:Oi}=oi,{join:Si,dirname:Ai}=m,{lstatSync:Li,readFileSync:Ii,truncateSync:Ci,writeFileSync:ki,accessSync:xi}=d,{platform:Ni}=y;Ri.NODE_ENV="production";const $i=_i(),ji=/^.*?:\/\/(.*?@)?(github\.com[:/])/i,Di=/^([^/]+)\/([^/#]+)?.*?\/([0-9a-f]+|v?[0-9]+\.[0-9]+\.[0-9]+)$/i,Pi=/^[0-9a-f]{7,}$/i,Bi=e=>{const t={};return(r,s)=>t[r]||(t[r]=e(r,s))},Mi=e=>e.replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&"),Ui=Bi(Oi),Hi=Bi((function(){var e,t;return arguments.length>=2?(e=arguments[0],t=arguments[1]):"string"==typeof arguments[0]?e=arguments[0]:t=arguments[0],(t=t||{}).npmrc=t.npmrc||fn("npm",{registry:"https://registry.npmjs.org/"}),gn(e=e||t.npmrc.registry,t)||yn(t.npmrc)})),Fi=Bi((function(e,t){var r=t||fn("npm",{registry:"https://registry.npmjs.org/"}),s=r[e+":registry"]||r.registry;return"/"===s.slice(-1)?s:s+"/"})),qi=Bi(e=>e.endsWith("/")?e.substring(0,e.length-1):e),zi={},Gi={},Zi=t.lookup;t.lookup=(e,t,r)=>{r||(r=t,t=void 0),zi[e]?r(...zi[e]):Gi[e]?Gi[e].push(r):(Gi[e]=[r],Zi(e,t,(...t)=>{zi[e]||(zi[e]=t),Gi[e].forEach(e=>e(...t))}))};const Xi=en(wi.slice(2),{boolean:["c","color","E","error-on-outdated","U","error-on-unchanged","h","help","j","json","n","no-color","u","update","v","version"],string:["d","allow-downgrade","f","file","g","greatest","G","githubapi","m","minor","P","patch","p","prerelease","R","release","r","registry","t","types"],alias:{c:"color",d:"allow-downgrade",E:"error-on-outdated",U:"error-on-unchanged",e:"exclude",f:"file",g:"greatest",G:"githubapi",h:"help",i:"include",j:"json",m:"minor",n:"no-color",P:"patch",p:"prerelease",r:"registry",R:"release",s:"semver",S:"sockets",t:"types",u:"update",v:"version"}});Xi.help&&(bi.write("usage: updates [options]\n\n  Options:\n    -u, --update                       Update versions and write package.json\n    -p, --prerelease [<pkg,...>]       Consider prerelease versions\n    -R, --release [<pkg,...>]          Only use release versions, may downgrade\n    -g, --greatest [<pkg,...>]         Prefer greatest over latest version\n    -i, --include <pkg,...>            Include only given packages\n    -e, --exclude <pkg,...>            Exclude given packages\n    -t, --types <type,...>             Check only given dependency types\n    -P, --patch [<pkg,...>]            Consider only up to semver-patch\n    -m, --minor [<pkg,...>]            Consider only up to semver-minor\n    -d, --allow-downgrade [<pkg,...>]  Allow version downgrades when using latest version\n    -E, --error-on-outdated            Exit with code 2 when updates are available and 0 when not\n    -U, --error-on-unchanged           Exit with code 0 when updates are available and 2 when not\n    -r, --registry <url>               Override npm registry URL\n    -G, --githubapi <url>              Override Github API URL\n    -f, --file <path>                  Use given package.json file or module directory\n    -S, --sockets <num>                Maximum number of parallel HTTP sockets opened. Default: 96\n    -j, --json                         Output a JSON object\n    -c, --color                        Force-enable color output\n    -n, --no-color                     Disable color output\n    -v, --version                      Print the version\n    -h, --help                         Print this help\n\n  Examples:\n    $ updates\n    $ updates -u\n    $ updates -u -m -e eslint\n    $ updates -u -U && rm -rf node_modules && npm i\n"),Ti(0)),Xi.version&&(console.info(Ei.version),Ti(0)),Xi["no-color"]?Ri.NO_COLOR="0":(Xi.color||void 0===bi.isTTY)&&(Ri.FORCE_COLOR="1");const{gray:Wi,green:Vi,red:Ki}=yi,Yi=Ia(Xi.greatest),Ji=Ia(Xi.prerelease),Qi=Ia(Xi.release),ea=Ia(Xi.patch),ta=Ia(Xi.minor),ra=Ia(Xi["allow-downgrade"]),sa=fn("npm",{registry:"https://registry.npmjs.org"}),na={npmrc:sa,recursive:!0},oa=qi(Xi.registry||sa.registry),ia="number"==typeof Xi.sockets?Xi.sockets:96,aa=Xi.githubapi?qi(Xi.githubapi):"https://api.github.com";let ca;const ha={},ua={};if(Xi.file){let e;try{e=Li(Xi.file)}catch(e){wa(new Error(`Unable to open ${Xi.file}: ${e.message}`))}e&&e.isFile()?ca=Xi.file:e&&e.isDirectory()?ca=Si(Xi.file,"package.json"):wa(new Error(Xi.file+" is neither a file nor directory"))}else ca=function e(t,r,s){const n=Si(r,t);try{return xi(n),n}catch{}const o=Ai(r);return s&&n===s||o===r?null:e(t,o,s)}("package.json",$i),ca||wa(new Error(`Unable to find package.json in ${$i} or any of its parents`));let la,pa,fa,da,ma;la=Xi.types?Array.isArray(Xi.types)?Xi.types:Xi.types.split(","):["dependencies","devDependencies","peerDependencies","optionalDependencies"];try{fa=Ii(ca,"utf8")}catch(e){wa(new Error("Unable to open package.json: "+e.message))}try{pa=JSON.parse(fa)}catch(e){wa(new Error("Error parsing package.json: "+e.message))}function ga(e){return[].concat(...e)}function ya(e){return(!ma||!ma.has(e))&&!(da&&!da.has(e))}Xi.include&&!0!==Xi.include&&(da=new Set(ga((Array.isArray(Xi.include)?Xi.include:[Xi.include]).map(e=>e.split(","))))),Xi.exclude&&!0!==Xi.exclude&&(ma=new Set(ga((Array.isArray(Xi.exclude)?Xi.exclude:[Xi.exclude]).map(e=>e.split(",")))));for(const e of la)for(const[t,r]of Object.entries(pa[e]||{}))Ko.validRange(r)&&ya(t)?ha[`${e}\0${t}`]={old:r}:ya(t)&&(ua[`${e}\0${t}`]={old:r});Object.keys(ha).length||Object.keys(ua).length||wa(da||ma?new Error("No packages match the given filters"):new Error("No packages found"));const Ea=[[1e3,1,"ns"],[1e6,1e3,"µs"],[1e9,1e6,"ms"],[6e10,1e9,"sec"],[36e11,6e10,"min"],[864e11,36e11,"hour"],[2592e12,864e11,"day"],[31536e12,2592e12,"month"],[1/0,31536e12,"year"]];function va(e){if(!e)return"";const t=1e6*new Date(e).getTime();if(Number.isNaN(t))return"";const r=1e6*Date.now()-t;if(r<=0)return"none";let s,n;for(let e=0;e<=Ea.length;e++){const t=Ea[e],[o,i,a]=t||[];if(t&&o&&r<o){s=Math.round(r/i),n=`${a}${s>1&&!a.endsWith("s")?"s":""}`;break}}return`${s} ${n}`}const _a=async(e,t,r)=>{const[s,n]=function(e,t){if(!e.startsWith("@"))return[Hi(t,na),t];{const r=(/@[a-z0-9][\w-.]+/.exec(e)||[])[0],s=qi(Fi(r,sa));if(s===t)return[Hi(t,na),t];try{const e=Hi(s,na);if(e&&e.token)return[e,s]}catch{return[Hi(t,na),t]}}}(e,r),o=await function(e,t,r){const s={maxSockets:ia,cacheManager:null,integrity:null,retry:5};return r&&r.token&&(s.headers={Authorization:`${r.type} ${r.token}`}),Ks(`${t}/${e.replace(/\//g,"%2f")}`,s)}(e,n,s);if(o&&o.ok)return[await o.json(),t,n];throw o&&o.status&&o.statusText?new Error(`Received ${o.status} ${o.statusText} for ${e} from ${n}`):new Error(`Unable to fetch ${e} from ${n}`)},ba=({repository:e,homepage:t},r,s)=>{if("https://npm.pkg.github.com"===r)return"https://github.com/"+s.replace(/^@/,"");if(e){const t="string"==typeof e?e:e.url,r=Ui(t);if(r&&r.browse)return r.browse();if(e&&e.url&&/^https?:/.test(e.url))return e.url}return t||""};function wa(e,t={}){const r={},s=e instanceof Error;"string"==typeof e?r.message=e:s&&(r.error=e.stack);for(const e of Object.values(ha))"oldPrint"in e&&(e.old=e.oldPrint,delete e.oldPrint),"newPrint"in e&&(e.new=e.newPrint,delete e.newPrint);if(Xi.json){if(!s){r.results={};for(const[e,t]of Object.entries(ha)){const[s,n]=e.split("\0");r.results[s]||(r.results[s]={}),r.results[s][n]=t}}console.info(JSON.stringify(r))}else if(Object.keys(ha).length&&!s&&console.info(function(){const e=[["NAME","OLD","NEW","AGE","INFO"]];for(const[t,r]of Object.entries(ha)){const[s,n]=t.split("\0");e.push([n,Ra(r.old,r.new,!1),Ra(r.new,r.old,!0),r.age||"",r.info])}return function(e,t){t||(t={});var r=void 0===t.hsep?"  ":t.hsep,s=t.align||[],n=t.stringLength||function(e){return String(e).length},o=Jo(e,(function(e,t){return Qo(t,(function(t,r){var s=Yo(t);(!e[r]||s>e[r])&&(e[r]=s)})),e}),[]),i=ei(e,(function(e){return ei(e,(function(e,t){var r=String(e);if("."===s[t]){var i=Yo(r),a=o[t]+(/\./.test(r)?1:2)-(n(r)-i);return r+Array(a).join(" ")}return r}))})),a=Jo(i,(function(e,t){return Qo(t,(function(t,r){var s=n(t);(!e[r]||s>e[r])&&(e[r]=s)})),e}),[]);return ei(i,(function(e){return ei(e,(function(e,t){var r=a[t]-n(e)||0,o=Array(Math.max(r+1,1)).join(" ");return"r"===s[t]||"."===s[t]?o+e:"c"===s[t]?Array(Math.ceil(r/2+1)).join(" ")+e+Array(Math.floor(r/2+1)).join(" "):e+o})).join(r).replace(/\s+$/,"")})).join("\n")}(e,{hsep:"  ",stringLength:e=>e.replace(vi,"").length})}()),r.message||r.error)if(r.message)console.info(r.message);else if(r.error){const e=r.error.split(/\r?\n/);for(const[t,r]of Object.entries(e))console.info(("0"===t?Ki:Wi)(r))}Xi["error-on-outdated"]?Ti(Object.keys(ha).length?2:0):Xi["error-on-unchanged"]?Ti(Object.keys(ha).length?0:2):Ti(t.exitCode||(r.error?1:0))}function Ra(e,t,r){const s=e.split(/\./),n=t.split(/\./),o=r?Vi:Ki,i=/^[0-9a-zA-Z-.]+$/;let a="";for(let e=0;e<s.length;e++){if(s[e]!==n[e]){i.test(s[e])?a+=o(s.slice(e).join(".")):a+=s[e].split("").map(e=>i.test(e)?o(e):e).join("")+o("."+s.slice(e+1).join("."));break}a+=s[e]+"."}return a}function Ta(e,t){return e.replace(/[0-9]+\.[0-9]+\.[0-9]+(-.+)?/g,t)}function Oa(e){const t=Ko.parse(e);return!!t&&Boolean(t.prerelease.length)}function Sa(e){return/[0-9]+\.[0-9]+\.[0-9]+-.+/.test(e)}function Aa(e,t,{range:r,semvers:s,usePre:n,useRel:o,useGreatest:i}={}){let a=function(e){try{return Ko.coerce(e).version}catch{return null}}(r),c=0;s=new Set(s),(n=Sa(r)||n)&&(s.add("prerelease"),s.has("patch")&&s.add("prepatch"),s.has("minor")&&s.add("preminor"),s.has("major")&&s.add("premajor"));for(const r of t){const t=Ko.parse(r);if(t.prerelease.length&&(!n||o))continue;const h=Ko.diff(a,t.version);if(h&&s.has(h))if(i||!("time"in e))Ko.gte(Ko.coerce(t.version).version,a)&&(a=t.version);else{const s=new Date(e.time[r]).getTime();s>=0&&s>c&&(a=t.version,c=s)}}return a||null}function La(e,t){if("*"===t.range)return null;if(t.range.includes("||"))return null;const r=Aa(e,Object.keys(e.versions).filter(e=>Ko.valid(e)),t);if(t.useGreatest)return r;{const s=e["dist-tags"].latest,n=Ko.coerce(t.range).version,o=Sa(t.range),i=Oa(r),a=Oa(s),c=Ko.gt(r,n);if(!t.useRel&&t.usePre||o&&i)return r;if(t.useRel&&!c&&o&&!i)return r;if(o&&!i&&c)return r;if(o&&!i&&!c)return null;const h=Ko.diff(n,s);return h&&"prerelease"!==h&&!t.semvers.has(h.replace(/^pre/,""))||t.useRel&&Oa(s)?r:Ko.lt(s,n)&&!a?!0===ra||Array.isArray(ra)&&ra.has(e.name)?s:null:s}}function Ia(e){return void 0!==e&&(""===e||("string"==typeof e?e.includes(",")?new Set(e.split(",")):new Set([e]):!!Array.isArray(e)&&new Set(e)))}(async function(){const e=await Promise.all(Object.keys(ha).map(e=>{const[t,r]=e.split("\0");return _a(r,t,oa)}));for(const[t,r,s]of e){if(t&&t.error)throw new Error(t.error);const e="boolean"==typeof Yi?Yi:Yi.has(t.name),n="boolean"==typeof Ji?Ji:Ji.has(t.name),o="boolean"==typeof Qi?Qi:Qi.has(t.name);let i;i=!0===ea||Array.isArray(ea)&&ea.has(t.name)?new Set(["patch"]):!0===ta||Array.isArray(ta)&&ta.has(t.name)?new Set(["patch","minor"]):new Set(["patch","minor","major"]);const a=`${r}\0${t.name}`,c=ha[a].old,h=La(t,{usePre:n,useRel:o,useGreatest:e,semvers:i,range:c}),u=Ta(c,h);h&&c!==u?(ha[a].new=u,ha[a].info=ba(t.versions[h]||t,s,t.name),t.time&&t.time[h]&&(ha[a].age=va(t.time[h]))):delete ha[a]}if(Object.keys(ua).length){let e=await Promise.all(Object.entries(ua).map(([e,t])=>{const[r,s]=e.split("\0");return async function([e,t],{useGreatest:r}={}){const s=t.old.replace(ji,""),[n,o,i,a]=Di.exec(s)||[];if(o&&i&&a)if(Pi.test(a)){const r=await Ks(`${aa}/repos/${o}/${i}/commits`);if(!r||!r.ok)return;const s=await r.json();let n,{sha:c,commit:h}=s[0];if(!c||!c.length)return;if(h&&h.committer&&h.committer.date?n=h.committer.date:h&&h.auhor&&h.author.date&&(n=h.author.date),c=c.substring(0,a.length),a!==c){return{key:e,newRange:t.old.replace(a,c),user:o,repo:i,oldRef:a,newRef:c,newDate:n}}}else{const t=await Ks(`${aa}/repos/${o}/${i}/git/refs/tags`);if(!t||!t.ok)return;const s=(await t.json()).map(e=>e.ref.replace(/^refs\/tags\//,"")),n=a.replace(/^v/,"");if(!Ko.valid(n))return;if(r){let t=a,r=a.replace(/^v/,"");for(const e of s){const s=e.replace(/^v/,"");Ko.valid(s)&&(t&&!Ko.gt(s,r)||(t=e,r=s))}if(Ko.neq(n,r)){return{key:e,newRange:t,user:o,repo:i,oldRef:a,newRef:t}}}else{const t=s[s.length-1],r=t.replace(/^v/,"");if(!Ko.valid(r))return;if(Ko.neq(n,r)){return{key:e,newRange:t,user:o,repo:i,oldRef:a,newRef:t}}}}}([e,t],{useGreatest:"boolean"==typeof Yi?Yi:Yi.has(s)})}));e=e.filter(e=>!!e);for(const t of e||[]){const{key:e,newRange:r,user:s,repo:n,oldRef:o,newRef:i,newDate:a}=t;ha[e]={old:ua[e].old,new:r,oldPrint:Pi.test(o)?o.substring(0,7):o,newPrint:Pi.test(i)?i.substring(0,7):i,info:`https://github.com/${s}/${n}`},a&&(ha[e].age=va(a))}}Object.keys(ha).length||wa("All packages are up to date."),Xi.update||wa();try{!function(e,t){const r="win32"===Ni();r&&Ci(e,0),ki(e,t,r?{flag:"r+"}:void 0)}(ca,function(){let e=fa;for(const t of Object.keys(ha)){const[r,s]=t.split("\0"),n=new RegExp(`"${Mi(s)}": +"${Mi(ha[t].old)}"`,"g");e=e.replace(n,`"${s}": "${ha[t].new}"`)}return e}())}catch(e){wa(new Error(`Error writing ${ca}: ${e.message}`))}wa(Vi("\n ╭────────────────────────╮\n │  package.json updated  │\n ╰────────────────────────╯".substring(1)))})().catch(wa);